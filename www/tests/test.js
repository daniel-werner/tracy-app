!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=32)}([function(t,e,n){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,"b",function(){return a}),n.d(e,"a",function(){return i});var i={TIZEN:"tizen",ANDROID:"android",BROWSER:"browser"},a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,a=[{key:"get",value:function(){var t=i.BROWSER;return"object"===("undefined"==typeof tizen?"undefined":o(tizen))&&"object"===o(tizen.systeminfo)?t=i.TIZEN:"object"===("undefined"==typeof device?"undefined":o(device))&&"Android"===device.platform&&(t=i.ANDROID),t}}],(n=null)&&r(e.prototype,n),a&&r(e,a),t}()},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,"c",function(){return a}),n.d(e,"b",function(){return u}),n.d(e,"a",function(){return c}),n(21),n(14);var r=0,i=0,a=1,u=2,c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.status=r,this._points=[],this._distance=0,this._segmentIndex=0,this._state=i}var e,n,a;return e=t,(n=[{key:"init",value:function(){}},{key:"start",value:function(){this._state=1}},{key:"pause",value:function(){this._state=2,this._segmentIndex++}},{key:"save",value:function(){this.status=1}},{key:"resume",value:function(){this._state=1}},{key:"isActive",value:function(){return 1===this._state}},{key:"addPoint",value:function(t){t.segment_index=this._segmentIndex,this._points.push(t);var e=this._getCalculationPoints();e&&this.calculate(e.pointA,e.pointB)}},{key:"_getCalculationPoints",value:function(){var t=null;return this._points.length>=2&&(t={pointA:this._points[this._points.length-2],pointB:this._points[this._points.length-1]}),t}},{key:"_calculateDistance",value:function(t,e){var n=window.app.common.calculations.calculateDistance({latitude:t.lat,longitude:t.lng},{latitude:e.lat,longitude:e.lng});return this._distance+=n.raw,n.raw}},{key:"calculate",value:function(t,e){}},{key:"toObject",value:function(){return{type:this.type,status:this.status,points:this._points}}},{key:"speedUnit",get:function(){return"km/h"}},{key:"speedLabel",get:function(){return"Speed"}},{key:"speed",get:function(){return 0}},{key:"distance",get:function(){return this._distance/1e3},set:function(t){this._distance=t}},{key:"points",get:function(){return this._points}},{key:"heartRate",get:function(){return this._points.length?this._points[this._points.length-1].heart_rate:0}},{key:"altitude",get:function(){return this._points.length?this._points[this._points.length-1].elevation:0}}])&&o(e.prototype,n),a&&o(e,a),t}()},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,"a",function(){return r});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commonEvents=window.app.common.events}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.bind()}},{key:"bind",value:function(){}},{key:"isHeartRateAvailable",value:function(){return!1}},{key:"backgroundRunEnable",value:function(){}},{key:"backgroundRunDisable",value:function(){}},{key:"exit",value:function(){}}])&&o(e.prototype,n),r&&o(e,r),t}()},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,"a",function(){return r});var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.level=null,this.commonEvents=window.app.common.events}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.bind()}},{key:"bind",value:function(){}}])&&o(e.prototype,n),r&&o(e,r),t}()},function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}n.d(e,"a",function(){return i});var r=["2G","2.5G","3G","4G","WIFI","ETHERNET","UNKNOWN"],i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commonEvents=window.app.common.events,this.networkType="NONE"}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.bind()}},{key:"bind",value:function(){}},{key:"isNetworkAvailable",value:function(){return-1!==r.indexOf(this.networkType)}},{key:"getNetworkType",value:function(){return this.networkType}}])&&o(e.prototype,n),i&&o(e,i),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return y});var o=n(0),r=n(2),i=n(8),a=n(9),u=n(3),c=n(10),s=n(11),l=n(4),f=n(12),d=n(13);function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.platform=e}var e,n,y;return e=t,(n=[{key:"buildNetworkDriver",value:function(){var t=new l.a;switch(this.platform){case o.a.TIZEN:t=new f.a;break;case o.a.ANDROID:t=new d.a}return t}},{key:"buildBatteryDriver",value:function(){var t=new u.a;switch(this.platform){case o.a.TIZEN:t=new c.a;break;case o.a.ANDROID:t=new s.a}return t}},{key:"buildHardwareDriver",value:function(){var t=new r.a;switch(this.platform){case o.a.TIZEN:t=new i.a;break;case o.a.ANDROID:t=new a.a}return t}}])&&p(e.prototype,n),y&&p(e,y),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(1);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,u(e).call(this))).type=o.b,t._speed=0,t}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(r=[{key:"_calculateSpeed",value:function(t,e){var n=this._calculateDistance(t,e),o=e.time-t.time;return this._speed=n>.5&&o>0&&o?3600*n/o:0,this._speed}},{key:"calculate",value:function(t,e){this._calculateSpeed(t,e)}},{key:"speed",get:function(){return this._speed}}])&&i(n.prototype,r),s&&i(n,s),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(1);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,u(e).call(this))).type=o.c,t._pace=0,t}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(r=[{key:"_calculatePace",value:function(t,e){var n=this._calculateDistance(t,e),o=e.time-t.time;return n>.5&&o>0?this._pace=o/n/60:this._speed=0,this._pace}},{key:"calculate",value:function(t,e){this._calculatePace(t,e)}},{key:"speedUnit",get:function(){return"min/km"}},{key:"speedLabel",get:function(){return"Pace"}},{key:"speed",get:function(){return this._pace}}])&&i(n.prototype,r),s&&i(n,s),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(2);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,u(e).call(this))).commonEvents=window.app.common.events,t}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(r=[{key:"bind",value:function(){}},{key:"isHeartRateAvailable",value:function(){return!0}},{key:"backgroundRunEnable",value:function(){tizen.power.request("CPU","CPU_AWAKE"),tizen.power.request("SCREEN","SCREEN_NORMAL")}},{key:"backgroundRunDisable",value:function(){tizen.power.release("CPU"),tizen.power.release("SCREEN")}},{key:"exit",value:function(){try{tizen.application.getCurrentApplication().exit()}catch(t){console.warn("Application exit failed.",t.message)}}}])&&i(n.prototype,r),s&&i(n,s),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(2);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,u(e).call(this))).commonEvents=window.app.common.events,t}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(r=[{key:"bind",value:function(){cordova.plugins.backgroundMode.on("activate",function(){console.log("activate background mode"),cordova.plugins.backgroundMode.disableWebViewOptimizations()})}},{key:"isHeartRateAvailable",value:function(){return!1}},{key:"backgroundRunEnable",value:function(){cordova.plugins.backgroundMode.enable()}},{key:"backgroundRunDisable",value:function(){cordova.plugins.backgroundMode.disable()}},{key:"exit",value:function(){try{navigator.app.exitApp()}catch(t){console.warn("Application exit failed.",t.message)}}}])&&i(n.prototype,r),s&&i(n,s),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).apply(this,arguments))}var n,s,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(s=[{key:"bind",value:function(){var t=this,e=null;if("object"===("undefined"==typeof tizen?"undefined":r(tizen))&&"object"===r(tizen.systeminfo))e=tizen.systeminfo;else console.warn("tizen.systeminfo not available");try{e.addPropertyValueChangeListener("BATTERY",function(e){t.level=e.level,!e.isCharging&&e.level<t.LOW_BATTERY&&t.commonEvents.dispatchEvent("model.battery.low")},null,function(t){console.warn("Battery state listener was not set.",t)})}catch(t){console.warn("Battery state listener was not set.",t)}}}])&&i(n.prototype,s),l&&i(n,l),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(3);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).call(this))}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(r=[{key:"bind",value:function(){var t=this;document.addEventListener("deviceready",function(){window.addEventListener("batterystatus",function(e){t.level=e.level},!1),window.addEventListener("batterylow",function(e){t.commonEvents.dispatchEvent("model.battery.low")},!1)},!1)}}])&&i(n.prototype,r),s&&i(n,s),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(4);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).call(this))}var n,s,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(s=[{key:"bind",value:function(){var t=this,e=null;if("object"===("undefined"==typeof tizen?"undefined":r(tizen))&&"object"===r(tizen.systeminfo))e=tizen.systeminfo;else console.warn("tizen.systeminfo not available");try{e.getPropertyValue("NETWORK",function(e){t.onGetNetworkTypeSuccess(e)},function(t){console.warn("Couldn't get network type value.",t)})}catch(t){console.warn("Couldn't get network type value.",t)}try{e.addPropertyValueChangeListener("NETWORK",function(e){t.onNetworkTypeChange(e)})}catch(t){console.warn("Network change listener was not set.",t)}}},{key:"onNetworkTypeChange",value:function(t){this.networkType=t.networkType,this.commonEvents.dispatchEvent("model.network.type.changed")}},{key:"onGetNetworkTypeSuccess",value:function(t){this.networkType=t.networkType,this.commonEvents.dispatchEvent("model.network.initialized")}}])&&i(n.prototype,s),l&&i(n,l),e}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var o=n(4);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).call(this))}var n,r,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,o["a"]),n=e,(r=[{key:"bind",value:function(){var t=this;document.addEventListener("offline",function(){t.onNetworkTypeChange()},!1),document.addEventListener("online",function(){t.onNetworkTypeChange()},!1),setTimeout(function(){t.onGetNetworkTypeSuccess()},500)}},{key:"isNetworkAvailable",value:function(){return navigator.connection.type!==Connection.NONE}},{key:"onNetworkTypeChange",value:function(){this.networkType=navigator.connection.type,this.commonEvents.dispatchEvent("model.network.type.changed")}},{key:"onGetNetworkTypeSuccess",value:function(){this.networkType=navigator.connection.type,this.commonEvents.dispatchEvent("model.network.initialized")}}])&&i(n.prototype,r),s&&i(n,s),e}()},function(t,e){window.app=window.app||{},function(t){"use strict";var e="m",n="km",o=null;function r(t){return t*Math.PI/180}function i(t){return t>=1e3&&(t/=1e3),t.toFixed(0)}function a(t){return t>=1e3?n:e}t.common=t.common||{},t.common.calculations=t.common.calculations||{},(o=t.common.calculations).calculateAngle=function(t,e){var n=r(t.longitude),o=r(e.longitude),i=r(t.latitude),a=r(e.latitude),u=o-n;return u>Math.PI?u-=2*Math.PI:u<-Math.PI&&(u+=2*Math.PI),180*Math.atan2(u,Math.log(Math.tan(a/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)))/Math.PI},o.calculateDistance=function(t,e){var n=r(t.longitude),o=r(e.longitude),u=r(t.latitude),c=r(e.latitude),s=6371e3*Math.acos(Math.sin(u)*Math.sin(c)+Math.cos(u)*Math.cos(c)*Math.cos(o-n));return{raw:s,formatted:i(s),unit:a(s)}},o.angleFromRotation=function(t){var e=-t%360;return e<0&&(e+=360),e},o.calculatePathAngle=function(t,e,n){return t*n/e}}(window.app)},function(t,e,n){n(16),n(17),n(18),n(19),n(20),n(23)},function(t,e){window.app=window.app||{},function(t){"use strict";t.common=t.common||{},t.common.events=t.common.events||{},t.common.events.dispatchEvent=function(t,e){var n=new window.CustomEvent(t,{detail:e});window.dispatchEvent(n)}}(window.app)},function(t,e){window.app=window.app||{},function(t){"use strict";t.common.events;t.model=t.model||{},t.model.battery=t.model.battery||{},t.model.battery.init=function(t){(t=t).init()}}(window.app)},function(t,e){window.app=window.app||{},function(t){"use strict";t.common.events;var e=null;t.model=t.model||{},t.model.network=t.model.network||{},(e=t.model.network).driver=null,e.isNetworkAvailable=function(){return e.driver.isNetworkAvailable()},e.getNetworkType=function(){return e.driver.getNetworkType()},e.init=function(t){e.driver=t,e.driver.init()}}(window.app)},function(t,e){window.app=window.app||{},function(t){"use strict";var e=1e3,n=5,o=null,r=t.common.events,i=(t.common.calculations,null),a=null,u=0;function c(t){(function(t){return!(!a||a.coords.latitude!==t.coords.latitude&&a.coords.longitude!==t.coords.longitude)})(t)||(a=t,r.dispatchEvent("model.geolocation.current.position.changed")),r.dispatchEvent("model.geolocation.position.available"),u=0}function s(t){r.dispatchEvent("model.geolocation.position.unavailable"),(u+=1)===n&&r.dispatchEvent("model.geolocation.position.lost"),console.warn(t)}t.model=t.model||{},t.model.geolocation=t.model.geolocation||{},(o=t.model.geolocation).getCurrentPosition=function(){return a},o.init=function(){navigator.geolocation?(i=navigator.geolocation,r.dispatchEvent("model.geolocation.available"),function(){try{i.watchPosition(c,s,{maximumAge:e,enableHighAccuracy:!0,timeout:e})}catch(t){console.warn("Couldn't get geolocation position.",t)}}()):r.dispatchEvent("model.geolocation.unavailable")}}(window.app)},function(t,e,n){"use strict";n.r(e);var o=n(6),r=n(7),i=n(1),a=n(22);n(14),window.app=window.app||{},function(t){var e=null,n=t.model.geolocation,u=t.common.events,c=null,s=null,l=null;function f(){s&&u.dispatchEvent("model.workout.updateui",s)}function d(){var t=n.getCurrentPosition();if(s&&s.isActive()){var e=new Point(0,t.coords.latitude,t.coords.longitude,0,t.coords.altitude||0,t.timestamp);s.addPoint(e),f()}}t.model=t.model||{},t.model.workout=t.model.workout||{},(e=t.model.workout).WORKOUT_TYPE_RUNNING=1,e.WORKOUT_TYPE_CYCLING=2,e.WORKOUT_STATUS_UNSAVED=0,e.WORKOUT_STATUS_SAVED=1,e.WORKOUT_STATUS_SYNCED=2,e.init=function(t){(c=t).init(),window.addEventListener("model.geolocation.position.available",d),l=new a({dbVersion:1,storeName:"workouts",keyPath:"id",autoIncrement:!0,onStoreReady:function(){u.dispatchEvent("model.workout.dbready"),!0}})},e.start=function(t){switch(t){case i.b:s=new o.a;break;case i.c:s=new r.a}s.start(),f(),c.backgroundRunEnable()},e.togglePause=function(){s.isActive()?(u.dispatchEvent("model.workout.paused"),s.pause(),c.backgroundRunDisable()):(c.backgroundRunEnable(),u.dispatchEvent("model.workout.resumed"),s.resume())},e.isHeartRateAvailable=function(){return c.isHeartRateAvailable()},e.save=function(){s.save();return l.put(s.toObject(),function(t){console.log("Successfully inserted! insertId is: "+t),u.dispatchEvent("model.workout.save.successful",!0)},function(t){console.log("Workout save failed!",t),u.dispatchEvent("model.workout.save.failed")}),!1},e.clear=function(){l.clear(function(){console.log("Database celared"),u.dispatchEvent("model.workout.clear.successful")},function(t){console.log("Database clear failed!",t),u.dispatchEvent("model.workout.clear.failed")})},e.getList=function(t){l.getAll(function(e){e=e.filter(function(e){return e.status==t}),u.dispatchEvent("model.workout.getlist.successful",e)},function(t){console.log("Workout save failed!",t),u.dispatchEvent("model.workout.getlist.failed")})},e.getItemsToSync=function(){return e.getList(e.WORKOUT_STATUS_SAVED)},e.getWorkout=function(){return s}}(window.app)},function(t,e){var n,o;n=window,(o=function(t,e,n,o,r,i){this.segment_index=t,this.lat=e,this.lng=n,this.heart_rate=o,this.elevation=r,this.time=i}).prototype={init:function(){}},n.Point=o},function(t,e,n){var o,r;!function(i,a,u){"use strict";void 0===(r="function"==typeof(o=function(){var t=function(t){throw t},e=function(){},n={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:t,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},o=function(t,e){for(var o in void 0===e&&"function"==typeof t&&(e=t),"[object Object]"!=Object.prototype.toString.call(t)&&(t={}),n)this[o]=void 0!==t[o]?t[o]:n[o];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,e&&(this.onStoreReady=e);var r="object"==typeof window?window:self,i=this.implementationPreference.filter(function(t){return t in r});this.implementation=i[0],this.idb=r[this.implementation],this.keyRange=r.IDBKeyRange||r.webkitIDBKeyRange||r.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},r={constructor:o,version:"1.7.2",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var t=this.idb.open(this.dbName,this.dbVersion),e=!1;t.onerror=function(t){if(function(t){if("error"in t.target)return"VersionError"==t.target.error.name;if("errorCode"in t.target)return 12==t.target.errorCode;return!1}(t))this.onError(new Error("The version number provided is lower than the existing one."));else{var e;if(t.target.error)e=t.target.error;else{var n="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in t.target&&(n+=" with error code "+t.target.errorCode),e=new Error(n)}this.onError(e)}}.bind(this),t.onsuccess=function(t){if(!e)if(this.db)this.onStoreReady();else if(this.db=t.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var n=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=n.objectStore(this.storeName);var o=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(t){var n=t.name;if(!n)return e=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(t),this.hasIndex(n)){var r=this.store.index(n),i=this.indexComplies(r,t);i||(e=!0,this.onError(new Error('Cannot modify index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),o.splice(o.indexOf(n),1)}else e=!0,this.onError(new Error('Cannot create new index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),o.length&&(e=!0,this.onError(new Error('Cannot delete index(es) "'+o.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),e||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),t.onupgradeneeded=function(t){if(this.db=t.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=t.target.transaction.objectStore(this.storeName);else{var n={autoIncrement:this.autoIncrement};null!==this.keyPath&&(n.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,n)}var o=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(t){var n=t.name;if(n||(e=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(t),this.hasIndex(n)){var r=this.store.index(n),i=this.indexComplies(r,t);i||(this.store.deleteIndex(n),this.store.createIndex(n,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})),o.splice(o.indexOf(n),1)}else this.store.createIndex(n,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})},this),o.length&&o.forEach(function(t){this.store.deleteIndex(t)},this)}.bind(this)},deleteDatabase:function(t,e){if(this.idb.deleteDatabase){this.db.close();var n=this.idb.deleteDatabase(this.dbName);n.onsuccess=t,n.onerror=e}else e(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(n,o,r,i){null!==this.keyPath&&(i=r,r=o,o=n),i||(i=t),r||(r=e);var a,u=!1,c=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);return s.oncomplete=function(){var t=u?r:i;t(c)},s.onabort=i,s.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(o),a=s.objectStore(this.storeName).put(o)):a=s.objectStore(this.storeName).put(o,n),a.onsuccess=function(t){u=!0,c=t.target.result},a.onerror=i,s},get:function(n,o,r){r||(r=t),o||(o=e);var i=!1,a=null,u=this.db.transaction([this.storeName],this.consts.READ_ONLY);u.oncomplete=function(){var t=i?o:r;t(a)},u.onabort=r,u.onerror=r;var c=u.objectStore(this.storeName).get(n);return c.onsuccess=function(t){i=!0,a=t.target.result},c.onerror=r,u},remove:function(n,o,r){r||(r=t),o||(o=e);var i=!1,a=null,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);u.oncomplete=function(){var t=i?o:r;t(a)},u.onabort=r,u.onerror=r;var c=u.objectStore(this.storeName).delete(n);return c.onsuccess=function(t){i=!0,a=t.target.result},c.onerror=r,u},batch:function(n,o,r){if(r||(r=t),o||(o=e),"[object Array]"!=Object.prototype.toString.call(n))r(new Error("dataArray argument must be of type Array."));else if(0===n.length)return o(!0);var i=n.length,a=!1,u=!1,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);c.oncomplete=function(){var t=u?o:r;t(u)},c.onabort=r,c.onerror=r;var s=function(){0!==--i||a||(a=!0,u=!0)};return n.forEach(function(t){var e=t.type,n=t.key,o=t.value,i=function(t){c.abort(),a||(a=!0,r(t,e,n))};if("remove"==e){var u=c.objectStore(this.storeName).delete(n);u.onsuccess=s,u.onerror=i}else if("put"==e){var l;null!==this.keyPath?(this._addIdPropertyIfNeeded(o),l=c.objectStore(this.storeName).put(o)):l=c.objectStore(this.storeName).put(o,n),l.onsuccess=s,l.onerror=i}},this),c},putBatch:function(t,e,n){var o=t.map(function(t){return{type:"put",value:t}});return this.batch(o,e,n)},upsertBatch:function(n,o,r,i){"function"==typeof o&&(i=r=o,o={}),i||(i=t),r||(r=e),o||(o={}),"[object Array]"!=Object.prototype.toString.call(n)&&i(new Error("dataArray argument must be of type Array."));var a=o.keyField||this.keyPath,u=n.length,c=!1,s=!1,l=0,f=this.db.transaction([this.storeName],this.consts.READ_WRITE);f.oncomplete=function(){s?r(n):i(!1)},f.onabort=i,f.onerror=i;var d=function(t){var e=n[l++];e[a]=t.target.result,0!==--u||c||(c=!0,s=!0)};return n.forEach(function(t){var e,n=t.key;null!==this.keyPath?(this._addIdPropertyIfNeeded(t),e=f.objectStore(this.storeName).put(t)):e=f.objectStore(this.storeName).put(t,n),e.onsuccess=d,e.onerror=function(t){f.abort(),c||(c=!0,i(t))}},this),f},removeBatch:function(t,e,n){var o=t.map(function(t){return{type:"remove",key:t}});return this.batch(o,e,n)},getBatch:function(n,o,r,i){if(r||(r=t),o||(o=e),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(n))r(new Error("keyArray argument must be of type Array."));else if(0===n.length)return o([]);var a=[],u=n.length,c=!1,s=null,l=this.db.transaction([this.storeName],this.consts.READ_ONLY);l.oncomplete=function(){var t=c?o:r;t(s)},l.onabort=r,l.onerror=r;var f=function(t){t.target.result||"dense"==i?a.push(t.target.result):"sparse"==i&&a.length++,0===--u&&(!0,c=!0,s=a)};return n.forEach(function(t){var e=l.objectStore(this.storeName).get(t);e.onsuccess=f,e.onerror=function(t){!0,s=t,r(t),l.abort()}},this),l},getAll:function(n,o){o||(o=t),n||(n=e);var r=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=r.objectStore(this.storeName);return i.getAll?this._getAllNative(r,i,n,o):this._getAllCursor(r,i,n,o),r},_getAllNative:function(t,e,n,o){var r=!1,i=null;t.oncomplete=function(){var t=r?n:o;t(i)},t.onabort=o,t.onerror=o;var a=e.getAll();a.onsuccess=function(t){r=!0,i=t.target.result},a.onerror=o},_getAllCursor:function(t,e,n,o){var r=[],i=!1,a=null;t.oncomplete=function(){var t=i?n:o;t(a)},t.onabort=o,t.onerror=o;var u=e.openCursor();u.onsuccess=function(t){var e=t.target.result;e?(r.push(e.value),e.continue()):(i=!0,a=r)},u.onError=o},clear:function(n,o){o||(o=t),n||(n=e);var r=!1,i=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){var t=r?n:o;t(i)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName).clear();return u.onsuccess=function(t){r=!0,i=t.target.result},u.onerror=o,a},_addIdPropertyIfNeeded:function(t){void 0===t[this.keyPath]&&(t[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(t){return this.store.indexNames.contains(t)},normalizeIndexData:function(t){t.keyPath=t.keyPath||t.name,t.unique=!!t.unique,t.multiEntry=!!t.multiEntry},indexComplies:function(t,e){var n=["keyPath","unique","multiEntry"].every(function(n){if("multiEntry"==n&&void 0===t[n]&&!1===e[n])return!0;if("keyPath"==n&&"[object Array]"==Object.prototype.toString.call(e[n])){var o=e.keyPath,r=t.keyPath;if("string"==typeof r)return o.toString()==r;if("function"!=typeof r.contains&&"function"!=typeof r.indexOf)return!1;if(r.length!==o.length)return!1;for(var i=0,a=o.length;i<a;i++)if(!(r.contains&&r.contains(o[i])||r.indexOf(-1!==o[i])))return!1;return!0}return e[n]==t[n]});return n},iterate:function(e,n){var o="desc"==(n=a({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:t,limit:1/0,offset:0,allowItemRejection:!1},n||{})).order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(o+="_NO_DUPLICATE");var r=!1,i=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),u=i.objectStore(this.storeName);n.index&&(u=u.index(n.index));var c=0;i.oncomplete=function(){r?n.onEnd?n.onEnd():e(null):n.onError(null)},i.onabort=n.onError,i.onerror=n.onError;var s=u.openCursor(n.keyRange,this.consts[o]);return s.onerror=n.onError,s.onsuccess=function(t){var o=t.target.result;if(o)if(n.offset)o.advance(n.offset),n.offset=0;else{var a=e(o.value,o,i);n.allowItemRejection&&!1===a||c++,n.autoContinue&&(c+n.offset<n.limit?o.continue():r=!0)}else r=!0},i},query:function(t,e){var n=[],o=0;return(e=e||{}).autoContinue=!0,e.writeAccess=!1,e.allowItemRejection=!!e.filter,e.onEnd=function(){t(n,o)},this.iterate(function(t){o++;var r=!e.filter||e.filter(t);return!1!==r&&n.push(t),r},e)},count:function(e,n){var o=(n=a({index:null,keyRange:null},n||{})).onError||t,r=!1,i=null,u=this.db.transaction([this.storeName],this.consts.READ_ONLY);u.oncomplete=function(){var t=r?e:o;t(i)},u.onabort=o,u.onerror=o;var c=u.objectStore(this.storeName);n.index&&(c=c.index(n.index));var s=c.count(n.keyRange);return s.onsuccess=function(t){r=!0,i=t.target.result},s.onError=o,u},makeKeyRange:function(t){var e,n=void 0!==t.lower,o=void 0!==t.upper,r=void 0!==t.only;switch(!0){case r:e=this.keyRange.only(t.only);break;case n&&o:e=this.keyRange.bound(t.lower,t.upper,t.excludeLower,t.excludeUpper);break;case n:e=this.keyRange.lowerBound(t.lower,t.excludeLower);break;case o:e=this.keyRange.upperBound(t.upper,t.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return e}},i={};function a(t,e){var n,o;for(n in e)(o=e[n])!==i[n]&&o!==t[n]&&(t[n]=o);return t}return o.prototype=r,o.version=r.version,o})?o.call(e,n,e,t):o)||(t.exports=r)}()},function(t,e){window.app=window.app||{},function(t){"use strict";var e=null,n=t.model.workout,o=t.common.events,r=(t.model.network,{login:"",upload:""});function i(){window.addEventListener("model.workout.getlist.successful",function(t){t.stopPropagation(),function(t){var e=new XMLHttpRequest,i=(a=localStorage.getItem("token")||"",u={key:"Authorization",value:"Bearer "+a},!!a.length&&u);var a,u;if(!1===i)return o.dispatchEvent("model.sync.login.required",{syncAfterLogin:!0}),!1;e.onreadystatechange=function(){if(4==e.readyState)switch(console.log("Response: "+e.status),e.status){case 200:n.clear(),o.dispatchEvent("model.sync.upload.successful",!0);break;case 401:o.dispatchEvent("model.sync.login.required",{syncAfterLogin:!0});break;default:o.dispatchEvent("model.sync.upload.failed")}},e.open("POST",r.upload,!0);var c=JSON.stringify({data:t});e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Accept","application/json"),e.setRequestHeader(i.key,i.value),console.log("Sending data to the server"),e.send(c)}(t.detail)},"model.workout.getlist.failed",function(t){t.stopPropagation(),o.dispatchEvent("model.sync.upload.failed")})}t.model=t.model||{},t.model.sync=t.model.sync||{},(e=t.model.sync).init=function(t,e){r.login=t,r.upload=e,i()},e.login=function(t,e){var n=new XMLHttpRequest,i=window.localStorage;n.onreadystatechange=function(){4==n.readyState&&(200==n.status?(i.setItem("token",JSON.parse(n.response)),o.dispatchEvent("model.sync.login.successful",{token:n.response})):o.dispatchEvent("model.sync.login.failed"))},n.onerror=function(t){console.log(t)};var a="email="+t+"&password="+e;n.open("POST",r.login,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(a)},e.sync=function(){n.getItemsToSync()}}(window.app)},,,,,,,,,function(t,e,n){t.exports=n(33)},function(t,e,n){n(15),n(34),n(35),n(36),n(37)},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n(5);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}describe("Workout model",function(){var t=window.app||{};jasmine.getEnv().randomizeTests(!1),beforeEach(function(e){var n=new XMLHttpRequest,i=this;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(i.waypoints=JSON.parse(this.responseText),e())},n.open("GET","tests/data/455.json",!0),n.send(),this.modelWorkout=t.model.workout,this.modelGeolocation=t.model.geolocation;var a=o.b.get(),u=new r.a(a);this.modelWorkout.init(u.buildHardwareDriver(a)),window.addEventListener("model.workout.dbready",function(t){i.modelWorkout.clear()}),this.runWorkout=function(t){navigator.geolocation.delay=1,navigator.geolocation.repeat=!1,navigator.geolocation.waypoints=this.waypoints,this.modelGeolocation.init(),this.modelWorkout.start(this.modelWorkout.WORKOUT_TYPE_RUNNING),setTimeout(function(){i.modelWorkout.togglePause(),t()},300)}}),it("should start and pause workout",function(t){var e=this;expect("object"===i(this.modelWorkout)).toBeTruthy();window.addEventListener("model.workout.paused",function t(n){var o=e.modelWorkout.getWorkout();expect(o.points.length).toEqual(6),window.removeEventListener("model.workout.paused",t)}),this.runWorkout(function(){e.modelWorkout.togglePause(),t()})}),it("should save the workout",function(t){var e=this;window.addEventListener("model.workout.save.successful",function(e){e.stopPropagation(),expect(e.detail).toBeTruthy(),t()},"model.workout.save.failed",function(e){e.stopPropagation(),expect(e.detail).toBeTruthy(),t()}),this.runWorkout(function(){e.modelWorkout.save()})}),it("should load saved workouts",function(t){var e=this;window.addEventListener("model.workout.getlist.successful",function(n){n.stopPropagation(),expect(1==n.detail.length).toBeTruthy(),expect(n.detail[0].status==e.modelWorkout.WORKOUT_STATUS_SAVED).toBeTruthy(),t()},"model.workout.getlist.failed",function(e){e.stopPropagation(),t()}),window.addEventListener("model.workout.save.successful",function(t){t.stopPropagation(),e.modelWorkout.getList(e.modelWorkout.WORKOUT_STATUS_SAVED)},"model.workout.save.failed",function(e){e.stopPropagation(),expect(e.detail).toBeTruthy(),t()}),this.runWorkout(function(){e.modelWorkout.save()})})})},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n(5);describe("Sync",function(){var t=window.app||{};jasmine.getEnv().randomizeTests(!1),t.model.sync.init("http://tracy.test/api/login","http://tracy.test/api/workouts"),beforeEach(function(e){var n=new XMLHttpRequest,i=this;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&(i.waypoints=JSON.parse(this.responseText),e())},n.open("GET","tests/data/455.json",!0),n.send(),this.modelWorkout=t.model.workout,this.modelGeolocation=t.model.geolocation,this.modelSync=t.model.sync;var a=o.b.get(),u=new r.a(a);this.modelWorkout.init(u.buildHardwareDriver(a)),window.addEventListener("model.workout.dbready",function(t){i.modelWorkout.clear()}),this.runWorkout=function(t){navigator.geolocation.delay=1,navigator.geolocation.repeat=!1,navigator.geolocation.waypoints=this.waypoints,this.modelGeolocation.init(),this.modelWorkout.start(this.modelWorkout.WORKOUT_TYPE_RUNNING),setTimeout(function(){i.modelWorkout.togglePause(),t()},300)}}),it("should login",function(t){window.addEventListener("model.sync.login.successful",function(e){e.stopPropagation(),expect(e.detail.hasOwnProperty("token")).toBeTruthy(),expect(e.detail.token.length>0).toBeTruthy(),t()}),this.modelSync.login("demo@email.com","123123")}),it("should login with token and upload workouts",function(t){var e=this;window.addEventListener("model.sync.upload.successful",function(e){e.stopPropagation(),expect(e.detail).toBeTruthy(),t()}),this.runWorkout(function(){e.modelWorkout.save(),e.modelSync.sync()})})})},function(t,e,n){"use strict";n.r(e);var o=n(0),r=n(8),i=n(9),a=n(10),u=n(11),c=n(12),s=n(13),l=n(5);describe("DriverFactory",function(){it("should create drivers for tizen",function(){var t=o.a.TIZEN,e=new l.a(t),n=e.buildBatteryDriver(t),i=e.buildNetworkDriver(t),u=e.buildHardwareDriver(t);expect(n instanceof a.a).toBeTruthy(),expect(i instanceof c.a).toBeTruthy(),expect(u instanceof r.a).toBeTruthy()}),it("should create drivers for android",function(){var t=o.a.ANDROID,e=new l.a(t),n=e.buildBatteryDriver(t),r=e.buildNetworkDriver(t),a=e.buildHardwareDriver(t);expect(n instanceof u.a).toBeTruthy(),expect(r instanceof s.a).toBeTruthy(),expect(a instanceof i.a).toBeTruthy()})})},function(t,e,n){"use strict";n.r(e);var o=n(6),r=n(7);describe("Workout",function(){it("should calculate distance",function(){var t=new Point(0,45.8849114,19.2545559,0,0,1551018055e3),e=new Point(0,45.8856601,19.2553514,0,0,1551018075e3),n=(new o.a)._calculateDistance(t,e);expect(n).toEqual(103.54782304590353)}),it("should calculate speed",function(){var t=new Point(0,45.8849114,19.2545559,0,0,1551018055e3),e=new Point(0,45.8856601,19.2553514,0,0,1551018075e3),n=(new o.a)._calculateSpeed(t,e);expect(n).toEqual(18.638608148262634)}),it("should calculate pace",function(){var t=new Point(0,45.8849114,19.2545559,0,0,1551018055e3),e=new Point(0,45.8856601,19.2553514,0,0,1551018095e3),n=(new r.a)._calculatePace(t,e);expect(n).toEqual(6.438248985409653)}),it("should add points and calculate distance and pace",function(){var t=new Point(0,45.8849114,19.2545559,0,0,1551018055e3),e=new Point(0,45.8856601,19.2553514,0,0,1551018095e3),n=new r.a;n.addPoint(t),n.addPoint(e),expect(n.speed).toEqual(6.438248985409653),expect(n.distance).toEqual(.10354782304590353)}),it("should add points and calculate distance and speed",function(){var t=new Point(0,45.8849114,19.2545559,0,0,1551018055e3),e=new Point(0,45.8856601,19.2553514,0,0,1551018075e3),n=new o.a;n.addPoint(t),n.addPoint(e),expect(n.speed).toEqual(18.638608148262634),expect(n.distance).toEqual(.10354782304590353)})})}]);
//# sourceMappingURL=test.js.map