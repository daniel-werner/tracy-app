{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/idb-wrapper/idbstore.js","webpack:///./src/js/app.js","webpack:///./src/js/common/app.common.calculations.js","webpack:///./src/js/common/app.common.events.js","webpack:///./src/js/mock.js","webpack:///./src/js/model/app.model.battery.js","webpack:///./src/js/model/app.model.geolocation.js","webpack:///./src/js/model/app.model.network.js","webpack:///./src/js/model/app.model.sync.js","webpack:///./src/js/model/app.model.workout.js","webpack:///./src/js/model/drivers/android/app.drivers.android.battery.js","webpack:///./src/js/model/drivers/android/app.drivers.android.hardware.js","webpack:///./src/js/model/drivers/android/app.drivers.android.network.js","webpack:///./src/js/model/drivers/app.driver.factory.js","webpack:///./src/js/model/drivers/app.drivers.battery.js","webpack:///./src/js/model/drivers/app.drivers.hardware.js","webpack:///./src/js/model/drivers/app.drivers.network.js","webpack:///./src/js/model/drivers/app.drivers.platform.js","webpack:///./src/js/model/drivers/tizen/app.drivers.tizen.battery.js","webpack:///./src/js/model/drivers/tizen/app.drivers.tizen.hardware.js","webpack:///./src/js/model/drivers/tizen/app.drivers.tizen.network.js","webpack:///./src/js/model/models.js","webpack:///./src/js/ui/app.ui.info.js","webpack:///./src/js/ui/app.ui.intro.js","webpack:///./src/js/ui/app.ui.js","webpack:///./src/js/ui/app.ui.login.js","webpack:///./src/js/ui/app.ui.main.js","webpack:///./src/js/ui/app.ui.workout.js","webpack:///./src/js/workout/app.workout.base_workout.js","webpack:///./src/js/workout/app.workout.cycling_workout.js","webpack:///./src/js/workout/app.workout.point.js","webpack:///./src/js/workout/app.workout.running_workout.js","webpack:///geomock.coffee"],"names":["require","window","app","defineApp","modelBattery","model","battery","modelWorkout","workout","modelNetwork","network","hardwareDriver","ui","exit","onHwKeyEvent","e","keyName","toggleClosePopup","bindEvents","document","addEventListener","evt","init","platform","Platform","get","driverFactory","DriverFactory","buildHardwareDriver","buildBatteryDriver","buildNetworkDriver","cordova","defineAppCommonCalculations","EARTH_RADIUS","METERS_UNIT","KILOMETERS_UNIT","calculations","common","toDegrees","value","Math","PI","toRadians","formatDistance","distance","toFixed","formatUnit","calculateAngle","start","destination","sLon","longitude","dLon","sLat","latitude","dLat","deltaLon","atan2","log","tan","calculateDistance","acos","sin","cos","raw","formatted","unit","angleFromRotation","angle","calculatePathAngle","partialPath","totalPath","totalAngle","defineAppCommonEvents","events","dispatchEvent","eventName","data","customEvent","CustomEvent","detail","navigator","geolocation","delay","repeat","startTime","waypoints","coords","accuracy","timestamp","defineAppModelBattery","commonEvents","driver","defineAppModelGeolocation","GEO_CHECKING_INTERVAL","GEO_CHECKING_COUNTER","modelGeolocation","commonCalculations","currentPosition","checkingCounter","isPositionEqual","position","onGetCurrentPositionSuccess","onGetCurrentPositionError","error","console","warn","getGeoPosition","watchPosition","maximumAge","enableHighAccuracy","timeout","getCurrentPosition","defineAppModelNetwork","checkNetworkType","isNetworkAvailable","getNetworkType","defineAppModelSync","modelSync","syncUrls","login","upload","sync","stopPropagation","workouts","uploadWorkouts","getToken","localStorage","getItem","createAuthHeader","token","header","key","length","loginUrl","uploadUrl","email","password","client","XMLHttpRequest","onreadystatechange","readyState","status","setItem","JSON","parse","response","onerror","open","setRequestHeader","send","getItemsToSync","authHeaders","clear","payload","stringify","IDBStore","defineAppModelWorkout","workoutDB","isDBready","WORKOUT_TYPE_RUNNING","WORKOUT_TYPE_CYCLING","WORKOUT_STATUS_UNSAVED","WORKOUT_STATUS_SAVED","WORKOUT_STATUS_SYNCED","updateUI","onModelGeolocationPositionAvailable","isActive","point","Point","altitude","addPoint","initDatabase","dbVersion","storeName","keyPath","autoIncrement","onStoreReady","type","CyclingWorkout","RunningWorkout","backgroundRunEnable","togglePause","resume","pause","backgroundRunDisable","isHeartRateAvailable","save","onsuccess","id","put","toObject","getList","filter","item","getAll","getWorkout","root","BatteryDriverAndroid","proto","BatteryDriver","bind","_this","onBatteryStatus","level","onBatteryLow","prototype","HardwareDriverAndroid","HardwareDriver","plugins","backgroundMode","on","disableWebViewOptimizations","enable","disable","exitApp","message","NetworkDriverAndroid","NetworkDriver","onNetworkTypeChange","connection","Connection","NONE","networkType","onGetNetworkTypeSuccess","networkDriver","PLATFORM_TIZEN","NetworkDriverTizen","PLATFORM_ANDROID","batteryDriver","BatteryDriverTizen","HardwareDriverTizen","NETWORKS","indexOf","PLATFORM_BROWSER","tizen","systeminfo","device","addPropertyValueChangeListener","change","isCharging","LOW_BATTERY","errorCallback","power","request","release","application","getCurrentApplication","getPropertyValue","onGetPropertyValueError","defineAppUiLogin","PAGE_ID","page","uiInfo","infoPopup","infoPopupContent","info","onPageBeforeShow","onInfoShowHandler","innerHTML","tau","openPopup","show","changePage","getElementById","defineAppUiIntro","LOST_CONNECTION_MESSAGE","WAITING_FOR_GPS_DATA_MESSAGE","LOST_CLASS","LOST_CONNECTION_TIMEOUT","uiIntro","uiMain","waitingMessage","isConnectionLost","intro","activePage","back","setWaitingMessage","classList","remove","innerText","setLostMessage","add","setTimeout","onTimeout","main","querySelector","defineAppUi","API_KEY","uiWorkout","uiLogin","closePopup","closePopupYesBtn","gpsStatusIndicators","networkStatusIndicators","onModelNetworkInitialized","onModelNetworkTypeChanged","i","networkStatusIndicator","contains","gpsStatusIndicator","onModelGeolocationPositionUnAvailable","onClosePopupYesBtnClick","querySelectorAll","loginPopup","loginPopupLoginButton","loginPopupCancelButton","onModelWorkoutUpdateUI","onLoginPopupLoginBtnClick","onLoginPopupCancelBtnClick","onLoginSuccessful","onLoginFail","onLoginRequired","defineAppUiMain","uiWaiting","workoutStartCyclingButton","workoutStartRunningButton","onWorkoutStartCycling","onWorkoutStartRunning","waiting","defineAppUiWorkout","PATH_ANGLE","uiDestination","uiFinish","totalDistance","workoutStatus","workoutSpeed","workoutSpeedLabel","workoutSpeedUnit","workoutDistance","workoutHr","workoutAltitude","workoutPauseButton","pausePopup","pausePopupFinishButton","pausePopupResumeButton","savePopup","savePopupDiscardButton","savePopupSaveButton","round","speed","speedLabel","speedUnit","heartRate","style","display","onModelWorkoutPaused","onModelWorkoutResumed","onPausePopupFinishBtnClick","onPauseBtnClick","onPausePopupResumeBtnClick","onSavePopupSaveBtnClick","onSavePopupDiscardBtnClick","onModelWorkoutSaveSuccess","onModelWorkoutSaveFailed","WORKOUT_STATE_STOPPED","WORKOUT_STATE_RUNNING","WORKOUT_STATE_PAUSED","WORKOUT_STATE_AUTOPAUSED","BaseWorkout","_points","_distance","_segmentIndex","_state","segment_index","push","points","_getCalculationPoints","calculate","pointA","pointB","calculationPoints","lat","lng","heart_rate","elevation","MPS_TO_KMH","_speed","_calculateDistance","timeDiff","time","_calculateSpeed","segmentIndex","MSEC_PER_METER_TO_MIN_PER_KM","_pace","_calculatePace"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,QAAQ,IAA4B;AACpC,QAAQ,oCAAO,UAAU;AAAA;AAAA;AAAA;AAAA,oGAAC;AAC1B,KAAK,MAAM,EAIN;AACL,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA,eAAe,SAAS;AACxB;AACA,eAAe,SAAS;AACxB;AACA,eAAe,MAAM;AACrB;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,QAAQ;AACvB,eAAe,QAAQ;AACvB,eAAe,MAAM;AACrB,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;;AAEA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA,aAAa;;AAEb;;AAEA;;AAEA;AACA;AACA,iBAAiB;AACjB,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA,aAAa;AACb,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,mBAAmB,EAAE;AACrB;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,MAAM;AACzB;AACA,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,gDAAgD;AAChD;AACA;AACA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA,wBAAwB;AACxB,aAAa;;AAEb;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,OAAO;AAC1B,mBAAmB,OAAO;AAC1B;AACA,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B;;AAE1B;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA,iBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA,wBAAwB;AACxB,aAAa;;AAEb;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,MAAM;AACzB,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA,+DAA+D,IAAI;;AAEnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa;;AAEb;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC,mBAAmB,eAAe;AAClC,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,eAAe;AAClC,mBAAmB,eAAe;AAClC,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA,mBAAmB,SAAS;AAC5B;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB,cAAc;AAClC;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B,mBAAmB,OAAO;AAC1B,mBAAmB,OAAO;AAC1B,mBAAmB,QAAQ;AAC3B,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,mBAAmB,SAAS;AAC5B,mBAAmB,OAAO;AAC1B,oBAAoB,QAAQ;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mDAAmD,OAAO;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;;AAET;AACA;AACA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","file":"/www/js/app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","/*global window:false, self:false, define:false, module:false */\n\n/**\n * @license IDBWrapper - A cross-browser wrapper for IndexedDB\n * Version 1.7.2\n * Copyright (c) 2011 - 2017 Jens Arps\n * http://jensarps.de/\n *\n * Licensed under the MIT license\n */\n\n(function (name, definition, global) {\n\n    'use strict';\n\n    if (typeof define === 'function') {\n        define(definition);\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = definition();\n    } else {\n        global[name] = definition();\n    }\n})('IDBStore', function () {\n\n    'use strict';\n\n    var defaultErrorHandler = function (error) {\n        throw error;\n    };\n    var defaultSuccessHandler = function () {\n    };\n\n    var defaults = {\n        storeName: 'Store',\n        storePrefix: 'IDBWrapper-',\n        dbVersion: 1,\n        keyPath: 'id',\n        autoIncrement: true,\n        onStoreReady: function () {\n        },\n        onError: defaultErrorHandler,\n        indexes: [],\n        implementationPreference: [\n            'indexedDB',\n            'webkitIndexedDB',\n            'mozIndexedDB',\n            'shimIndexedDB'\n        ]\n    };\n\n    /**\n     *\n     * The IDBStore constructor\n     *\n     * @constructor\n     * @name IDBStore\n     * @version 1.7.2\n     *\n     * @param {Object} [kwArgs] An options object used to configure the store and\n     *  set callbacks\n     * @param {String} [kwArgs.storeName='Store'] The name of the store\n     * @param {String} [kwArgs.storePrefix='IDBWrapper-'] A prefix that is\n     *  internally used to construct the name of the database, which will be\n     *  kwArgs.storePrefix + kwArgs.storeName\n     * @param {Number} [kwArgs.dbVersion=1] The version of the store\n     * @param {String} [kwArgs.keyPath='id'] The key path to use. If you want to\n     *  setup IDBWrapper to work with out-of-line keys, you need to set this to\n     *  `null`\n     * @param {Boolean} [kwArgs.autoIncrement=true] If set to true, IDBStore will\n     *  automatically make sure a unique keyPath value is present on each object\n     *  that is stored.\n     * @param {Function} [kwArgs.onStoreReady] A callback to be called when the\n     *  store is ready to be used.\n     * @param {Function} [kwArgs.onError=throw] A callback to be called when an\n     *  error occurred during instantiation of the store.\n     * @param {Array} [kwArgs.indexes=[]] An array of indexData objects\n     *  defining the indexes to use with the store. For every index to be used\n     *  one indexData object needs to be passed in the array.\n     *  An indexData object is defined as follows:\n     * @param {Object} [kwArgs.indexes.indexData] An object defining the index to\n     *  use\n     * @param {String} kwArgs.indexes.indexData.name The name of the index\n     * @param {String} [kwArgs.indexes.indexData.keyPath] The key path of the index\n     * @param {Boolean} [kwArgs.indexes.indexData.unique] Whether the index is unique\n     * @param {Boolean} [kwArgs.indexes.indexData.multiEntry] Whether the index is multi entry\n     * @param {Array} [kwArgs.implementationPreference=['indexedDB','webkitIndexedDB','mozIndexedDB','shimIndexedDB']] An array of strings naming implementations to be used, in order or preference\n     * @param {Function} [onStoreReady] A callback to be called when the store\n     * is ready to be used.\n     * @example\n     // create a store for customers with an additional index over the\n     // `lastname` property.\n     var myCustomerStore = new IDBStore({\n         dbVersion: 1,\n         storeName: 'customer-index',\n         keyPath: 'customerid',\n         autoIncrement: true,\n         onStoreReady: populateTable,\n         indexes: [\n             { name: 'lastname', keyPath: 'lastname', unique: false, multiEntry: false }\n         ]\n     });\n     * @example\n     // create a generic store\n     var myCustomerStore = new IDBStore({\n         storeName: 'my-data-store',\n         onStoreReady: function(){\n             // start working with the store.\n         }\n     });\n     */\n    var IDBStore = function (kwArgs, onStoreReady) {\n\n        if (typeof onStoreReady == 'undefined' && typeof kwArgs == 'function') {\n            onStoreReady = kwArgs;\n        }\n        if (Object.prototype.toString.call(kwArgs) != '[object Object]') {\n            kwArgs = {};\n        }\n\n        for (var key in defaults) {\n            this[key] = typeof kwArgs[key] != 'undefined' ? kwArgs[key] : defaults[key];\n        }\n\n        this.dbName = this.storePrefix + this.storeName;\n        this.dbVersion = parseInt(this.dbVersion, 10) || 1;\n\n        onStoreReady && (this.onStoreReady = onStoreReady);\n\n        var env = typeof window == 'object' ? window : self;\n        var availableImplementations = this.implementationPreference.filter(function (implName) {\n            return implName in env;\n        });\n        this.implementation = availableImplementations[0];\n        this.idb = env[this.implementation];\n        this.keyRange = env.IDBKeyRange || env.webkitIDBKeyRange || env.mozIDBKeyRange;\n\n        this.consts = {\n            'READ_ONLY': 'readonly',\n            'READ_WRITE': 'readwrite',\n            'VERSION_CHANGE': 'versionchange',\n            'NEXT': 'next',\n            'NEXT_NO_DUPLICATE': 'nextunique',\n            'PREV': 'prev',\n            'PREV_NO_DUPLICATE': 'prevunique'\n        };\n\n        this.openDB();\n    };\n\n    /** @lends IDBStore.prototype */\n    var proto = {\n\n        /**\n         * A pointer to the IDBStore ctor\n         *\n         * @private\n         * @type {Function}\n         * @constructs\n         */\n        constructor: IDBStore,\n\n        /**\n         * The version of IDBStore\n         *\n         * @type {String}\n         */\n        version: '1.7.2',\n\n        /**\n         * A reference to the IndexedDB object\n         *\n         * @type {IDBDatabase}\n         */\n        db: null,\n\n        /**\n         * The full name of the IndexedDB used by IDBStore, composed of\n         * this.storePrefix + this.storeName\n         *\n         * @type {String}\n         */\n        dbName: null,\n\n        /**\n         * The version of the IndexedDB used by IDBStore\n         *\n         * @type {Number}\n         */\n        dbVersion: null,\n\n        /**\n         * A reference to the objectStore used by IDBStore\n         *\n         * @type {IDBObjectStore}\n         */\n        store: null,\n\n        /**\n         * The store name\n         *\n         * @type {String}\n         */\n        storeName: null,\n\n        /**\n         * The prefix to prepend to the store name\n         *\n         * @type {String}\n         */\n        storePrefix: null,\n\n        /**\n         * The key path\n         *\n         * @type {String}\n         */\n        keyPath: null,\n\n        /**\n         * Whether IDBStore uses autoIncrement\n         *\n         * @type {Boolean}\n         */\n        autoIncrement: null,\n\n        /**\n         * The indexes used by IDBStore\n         *\n         * @type {Array}\n         */\n        indexes: null,\n\n        /**\n         * The implemantations to try to use, in order of preference\n         *\n         * @type {Array}\n         */\n        implementationPreference: null,\n\n        /**\n         * The actual implementation being used\n         *\n         * @type {String}\n         */\n        implementation: '',\n\n        /**\n         * The callback to be called when the store is ready to be used\n         *\n         * @type {Function}\n         */\n        onStoreReady: null,\n\n        /**\n         * The callback to be called if an error occurred during instantiation\n         * of the store\n         *\n         * @type {Function}\n         */\n        onError: null,\n\n        /**\n         * The internal insertID counter\n         *\n         * @type {Number}\n         * @private\n         */\n        _insertIdCount: 0,\n\n        /**\n         * Opens an IndexedDB; called by the constructor.\n         *\n         * Will check if versions match and compare provided index configuration\n         * with existing ones, and update indexes if necessary.\n         *\n         * Will call this.onStoreReady() if everything went well and the store\n         * is ready to use, and this.onError() is something went wrong.\n         *\n         * @private\n         *\n         */\n        openDB: function () {\n\n            var openRequest = this.idb.open(this.dbName, this.dbVersion);\n            var preventSuccessCallback = false;\n\n            openRequest.onerror = function (errorEvent) {\n\n                if (hasVersionError(errorEvent)) {\n                    this.onError(new Error('The version number provided is lower than the existing one.'));\n                } else {\n                    var error;\n\n                    if (errorEvent.target.error) {\n                        error = errorEvent.target.error;\n                    } else {\n                        var errorMessage = 'IndexedDB unknown error occurred when opening DB ' + this.dbName + ' version ' + this.dbVersion;\n                        if ('errorCode' in errorEvent.target) {\n                            errorMessage += ' with error code ' + errorEvent.target.errorCode;\n                        }\n                        error = new Error(errorMessage);\n                    }\n\n                    this.onError(error);\n                }\n            }.bind(this);\n\n            openRequest.onsuccess = function (event) {\n\n                if (preventSuccessCallback) {\n                    return;\n                }\n\n                if (this.db) {\n                    this.onStoreReady();\n                    return;\n                }\n\n                this.db = event.target.result;\n\n                if (typeof this.db.version == 'string') {\n                    this.onError(new Error('The IndexedDB implementation in this browser is outdated. Please upgrade your browser.'));\n                    return;\n                }\n\n                if (!this.db.objectStoreNames.contains(this.storeName)) {\n                    // We should never ever get here.\n                    // Lets notify the user anyway.\n                    this.onError(new Error('Object store couldn\\'t be created.'));\n                    return;\n                }\n\n                var emptyTransaction = this.db.transaction([this.storeName], this.consts.READ_ONLY);\n                this.store = emptyTransaction.objectStore(this.storeName);\n\n                // check indexes\n                var existingIndexes = Array.prototype.slice.call(this.getIndexList());\n                this.indexes.forEach(function (indexData) {\n                    var indexName = indexData.name;\n\n                    if (!indexName) {\n                        preventSuccessCallback = true;\n                        this.onError(new Error('Cannot create index: No index name given.'));\n                        return;\n                    }\n\n                    this.normalizeIndexData(indexData);\n\n                    if (this.hasIndex(indexName)) {\n                        // check if it complies\n                        var actualIndex = this.store.index(indexName);\n                        var complies = this.indexComplies(actualIndex, indexData);\n                        if (!complies) {\n                            preventSuccessCallback = true;\n                            this.onError(new Error('Cannot modify index \"' + indexName + '\" for current version. Please bump version number to ' + ( this.dbVersion + 1 ) + '.'));\n                        }\n\n                        existingIndexes.splice(existingIndexes.indexOf(indexName), 1);\n                    } else {\n                        preventSuccessCallback = true;\n                        this.onError(new Error('Cannot create new index \"' + indexName + '\" for current version. Please bump version number to ' + ( this.dbVersion + 1 ) + '.'));\n                    }\n\n                }, this);\n\n                if (existingIndexes.length) {\n                    preventSuccessCallback = true;\n                    this.onError(new Error('Cannot delete index(es) \"' + existingIndexes.toString() + '\" for current version. Please bump version number to ' + ( this.dbVersion + 1 ) + '.'));\n                }\n\n                preventSuccessCallback || this.onStoreReady();\n            }.bind(this);\n\n            openRequest.onupgradeneeded = function (/* IDBVersionChangeEvent */ event) {\n\n                this.db = event.target.result;\n\n                if (this.db.objectStoreNames.contains(this.storeName)) {\n                    this.store = event.target.transaction.objectStore(this.storeName);\n                } else {\n                    var optionalParameters = {autoIncrement: this.autoIncrement};\n                    if (this.keyPath !== null) {\n                        optionalParameters.keyPath = this.keyPath;\n                    }\n                    this.store = this.db.createObjectStore(this.storeName, optionalParameters);\n                }\n\n                var existingIndexes = Array.prototype.slice.call(this.getIndexList());\n                this.indexes.forEach(function (indexData) {\n                    var indexName = indexData.name;\n\n                    if (!indexName) {\n                        preventSuccessCallback = true;\n                        this.onError(new Error('Cannot create index: No index name given.'));\n                    }\n\n                    this.normalizeIndexData(indexData);\n\n                    if (this.hasIndex(indexName)) {\n                        // check if it complies\n                        var actualIndex = this.store.index(indexName);\n                        var complies = this.indexComplies(actualIndex, indexData);\n                        if (!complies) {\n                            // index differs, need to delete and re-create\n                            this.store.deleteIndex(indexName);\n                            this.store.createIndex(indexName, indexData.keyPath, {\n                                unique: indexData.unique,\n                                multiEntry: indexData.multiEntry\n                            });\n                        }\n\n                        existingIndexes.splice(existingIndexes.indexOf(indexName), 1);\n                    } else {\n                        this.store.createIndex(indexName, indexData.keyPath, {\n                            unique: indexData.unique,\n                            multiEntry: indexData.multiEntry\n                        });\n                    }\n\n                }, this);\n\n                if (existingIndexes.length) {\n                    existingIndexes.forEach(function (_indexName) {\n                        this.store.deleteIndex(_indexName);\n                    }, this);\n                }\n\n            }.bind(this);\n        },\n\n        /**\n         * Deletes the database used for this store if the IDB implementations\n         * provides that functionality.\n         *\n         * @param {Function} [onSuccess] A callback that is called if deletion\n         *  was successful.\n         * @param {Function} [onError] A callback that is called if deletion\n         *  failed.\n         */\n        deleteDatabase: function (onSuccess, onError) {\n            if (this.idb.deleteDatabase) {\n                this.db.close();\n                var deleteRequest = this.idb.deleteDatabase(this.dbName);\n                deleteRequest.onsuccess = onSuccess;\n                deleteRequest.onerror = onError;\n            } else {\n                onError(new Error('Browser does not support IndexedDB deleteDatabase!'));\n            }\n        },\n\n        /*********************\n         * data manipulation *\n         *********************/\n\n        /**\n         * Puts an object into the store. If an entry with the given id exists,\n         * it will be overwritten. This method has a different signature for inline\n         * keys and out-of-line keys; please see the examples below.\n         *\n         * @param {*} [key] The key to store. This is only needed if IDBWrapper\n         *  is set to use out-of-line keys. For inline keys - the default scenario -\n         *  this can be omitted.\n         * @param {Object} value The data object to store.\n         * @param {Function} [onSuccess] A callback that is called if insertion\n         *  was successful.\n         * @param {Function} [onError] A callback that is called if insertion\n         *  failed.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         * @example\n         // Storing an object, using inline keys (the default scenario):\n         var myCustomer = {\n             customerid: 2346223,\n             lastname: 'Doe',\n             firstname: 'John'\n         };\n         myCustomerStore.put(myCustomer, mySuccessHandler, myErrorHandler);\n         // Note that passing success- and error-handlers is optional.\n         * @example\n         // Storing an object, using out-of-line keys:\n         var myCustomer = {\n             lastname: 'Doe',\n             firstname: 'John'\n         };\n         myCustomerStore.put(2346223, myCustomer, mySuccessHandler, myErrorHandler);\n         // Note that passing success- and error-handlers is optional.\n         */\n        put: function (key, value, onSuccess, onError) {\n            if (this.keyPath !== null) {\n                onError = onSuccess;\n                onSuccess = value;\n                value = key;\n            }\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n\n            var hasSuccess = false,\n                result = null,\n                putRequest;\n\n            var putTransaction = this.db.transaction([this.storeName], this.consts.READ_WRITE);\n            putTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            putTransaction.onabort = onError;\n            putTransaction.onerror = onError;\n\n            if (this.keyPath !== null) { // in-line keys\n                this._addIdPropertyIfNeeded(value);\n                putRequest = putTransaction.objectStore(this.storeName).put(value);\n            } else { // out-of-line keys\n                putRequest = putTransaction.objectStore(this.storeName).put(value, key);\n            }\n            putRequest.onsuccess = function (event) {\n                hasSuccess = true;\n                result = event.target.result;\n            };\n            putRequest.onerror = onError;\n\n            return putTransaction;\n        },\n\n        /**\n         * Retrieves an object from the store. If no entry exists with the given id,\n         * the success handler will be called with null as first and only argument.\n         *\n         * @param {*} key The id of the object to fetch.\n         * @param {Function} [onSuccess] A callback that is called if fetching\n         *  was successful. Will receive the object as only argument.\n         * @param {Function} [onError] A callback that will be called if an error\n         *  occurred during the operation.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        get: function (key, onSuccess, onError) {\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n\n            var hasSuccess = false,\n                result = null;\n\n            var getTransaction = this.db.transaction([this.storeName], this.consts.READ_ONLY);\n            getTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            getTransaction.onabort = onError;\n            getTransaction.onerror = onError;\n            var getRequest = getTransaction.objectStore(this.storeName).get(key);\n            getRequest.onsuccess = function (event) {\n                hasSuccess = true;\n                result = event.target.result;\n            };\n            getRequest.onerror = onError;\n\n            return getTransaction;\n        },\n\n        /**\n         * Removes an object from the store.\n         *\n         * @param {*} key The id of the object to remove.\n         * @param {Function} [onSuccess] A callback that is called if the removal\n         *  was successful.\n         * @param {Function} [onError] A callback that will be called if an error\n         *  occurred during the operation.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        remove: function (key, onSuccess, onError) {\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n\n            var hasSuccess = false,\n                result = null;\n\n            var removeTransaction = this.db.transaction([this.storeName], this.consts.READ_WRITE);\n            removeTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            removeTransaction.onabort = onError;\n            removeTransaction.onerror = onError;\n\n            var deleteRequest = removeTransaction.objectStore(this.storeName)['delete'](key);\n            deleteRequest.onsuccess = function (event) {\n                hasSuccess = true;\n                result = event.target.result;\n            };\n            deleteRequest.onerror = onError;\n\n            return removeTransaction;\n        },\n\n        /**\n         * Runs a batch of put and/or remove operations on the store.\n         *\n         * @param {Array} dataArray An array of objects containing the operation to run\n         *  and the data object (for put operations).\n         * @param {Function} [onSuccess] A callback that is called if all operations\n         *  were successful.\n         * @param {Function} [onError] A callback that is called if an error\n         *  occurred during one of the operations.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        batch: function (dataArray, onSuccess, onError) {\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n\n            if (Object.prototype.toString.call(dataArray) != '[object Array]') {\n                onError(new Error('dataArray argument must be of type Array.'));\n            } else if (dataArray.length === 0) {\n                return onSuccess(true);\n            }\n\n            var count = dataArray.length;\n            var called = false;\n            var hasSuccess = false;\n\n            var batchTransaction = this.db.transaction([this.storeName], this.consts.READ_WRITE);\n            batchTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(hasSuccess);\n            };\n            batchTransaction.onabort = onError;\n            batchTransaction.onerror = onError;\n\n\n            var onItemSuccess = function () {\n                count--;\n                if (count === 0 && !called) {\n                    called = true;\n                    hasSuccess = true;\n                }\n            };\n\n            dataArray.forEach(function (operation) {\n                var type = operation.type;\n                var key = operation.key;\n                var value = operation.value;\n\n                var onItemError = function (err) {\n                    batchTransaction.abort();\n                    if (!called) {\n                        called = true;\n                        onError(err, type, key);\n                    }\n                };\n\n                if (type == 'remove') {\n                    var deleteRequest = batchTransaction.objectStore(this.storeName)['delete'](key);\n                    deleteRequest.onsuccess = onItemSuccess;\n                    deleteRequest.onerror = onItemError;\n                } else if (type == 'put') {\n                    var putRequest;\n                    if (this.keyPath !== null) { // in-line keys\n                        this._addIdPropertyIfNeeded(value);\n                        putRequest = batchTransaction.objectStore(this.storeName).put(value);\n                    } else { // out-of-line keys\n                        putRequest = batchTransaction.objectStore(this.storeName).put(value, key);\n                    }\n                    putRequest.onsuccess = onItemSuccess;\n                    putRequest.onerror = onItemError;\n                }\n            }, this);\n\n            return batchTransaction;\n        },\n\n        /**\n         * Takes an array of objects and stores them in a single transaction.\n         *\n         * @param {Array} dataArray An array of objects to store\n         * @param {Function} [onSuccess] A callback that is called if all operations\n         *  were successful.\n         * @param {Function} [onError] A callback that is called if an error\n         *  occurred during one of the operations.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        putBatch: function (dataArray, onSuccess, onError) {\n            var batchData = dataArray.map(function (item) {\n                return {type: 'put', value: item};\n            });\n\n            return this.batch(batchData, onSuccess, onError);\n        },\n\n        /**\n         * Like putBatch, takes an array of objects and stores them in a single\n         * transaction, but allows processing of the result values.  Returns the\n         * processed records containing the key for newly created records to the\n         * onSuccess calllback instead of only returning true or false for success.\n         * In addition, added the option for the caller to specify a key field that\n         * should be set to the newly created key.\n         *\n         * @param {Array} dataArray An array of objects to store\n         * @param {Object} [options] An object containing optional options\n         * @param {String} [options.keyField=this.keyPath] Specifies a field in the record to update\n         *  with the auto-incrementing key. Defaults to the store's keyPath.\n         * @param {Function} [onSuccess] A callback that is called if all operations\n         *  were successful.\n         * @param {Function} [onError] A callback that is called if an error\n         *  occurred during one of the operations.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         *\n         */\n        upsertBatch: function (dataArray, options, onSuccess, onError) {\n            // handle `dataArray, onSuccess, onError` signature\n            if (typeof options == 'function') {\n                onSuccess = options;\n                onError = onSuccess;\n                options = {};\n            }\n\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n            options || (options = {});\n\n            if (Object.prototype.toString.call(dataArray) != '[object Array]') {\n                onError(new Error('dataArray argument must be of type Array.'));\n            }\n\n            var keyField = options.keyField || this.keyPath;\n            var count = dataArray.length;\n            var called = false;\n            var hasSuccess = false;\n            var index = 0; // assume success callbacks are executed in order\n\n            var batchTransaction = this.db.transaction([this.storeName], this.consts.READ_WRITE);\n            batchTransaction.oncomplete = function () {\n                if (hasSuccess) {\n                    onSuccess(dataArray);\n                } else {\n                    onError(false);\n                }\n            };\n            batchTransaction.onabort = onError;\n            batchTransaction.onerror = onError;\n\n            var onItemSuccess = function (event) {\n                var record = dataArray[index++];\n                record[keyField] = event.target.result;\n\n                count--;\n                if (count === 0 && !called) {\n                    called = true;\n                    hasSuccess = true;\n                }\n            };\n\n            dataArray.forEach(function (record) {\n                var key = record.key;\n\n                var onItemError = function (err) {\n                    batchTransaction.abort();\n                    if (!called) {\n                        called = true;\n                        onError(err);\n                    }\n                };\n\n                var putRequest;\n                if (this.keyPath !== null) { // in-line keys\n                    this._addIdPropertyIfNeeded(record);\n                    putRequest = batchTransaction.objectStore(this.storeName).put(record);\n                } else { // out-of-line keys\n                    putRequest = batchTransaction.objectStore(this.storeName).put(record, key);\n                }\n                putRequest.onsuccess = onItemSuccess;\n                putRequest.onerror = onItemError;\n            }, this);\n\n            return batchTransaction;\n        },\n\n        /**\n         * Takes an array of keys and removes matching objects in a single\n         * transaction.\n         *\n         * @param {Array} keyArray An array of keys to remove\n         * @param {Function} [onSuccess] A callback that is called if all operations\n         *  were successful.\n         * @param {Function} [onError] A callback that is called if an error\n         *  occurred during one of the operations.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        removeBatch: function (keyArray, onSuccess, onError) {\n            var batchData = keyArray.map(function (key) {\n                return {type: 'remove', key: key};\n            });\n\n            return this.batch(batchData, onSuccess, onError);\n        },\n\n        /**\n         * Takes an array of keys and fetches matching objects\n         *\n         * @param {Array} keyArray An array of keys identifying the objects to fetch\n         * @param {Function} [onSuccess] A callback that is called if all operations\n         *  were successful.\n         * @param {Function} [onError] A callback that is called if an error\n         *  occurred during one of the operations.\n         * @param {String} [arrayType='sparse'] The type of array to pass to the\n         *  success handler. May be one of 'sparse', 'dense' or 'skip'. Defaults to\n         *  'sparse'. This parameter specifies how to handle the situation if a get\n         *  operation did not throw an error, but there was no matching object in\n         *  the database. In most cases, 'sparse' provides the most desired\n         *  behavior. See the examples for details.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         * @example\n         // given that there are two objects in the database with the keypath\n         // values 1 and 2, and the call looks like this:\n         myStore.getBatch([1, 5, 2], onError, function (data) {  }, arrayType);\n\n         // this is what the `data` array will be like:\n\n         // arrayType == 'sparse':\n         // data is a sparse array containing two entries and having a length of 3:\n         [Object, 2: Object]\n         0: Object\n         2: Object\n         length: 3\n         // calling forEach on data will result in the callback being called two\n         // times, with the index parameter matching the index of the key in the\n         // keyArray.\n\n         // arrayType == 'dense':\n         // data is a dense array containing three entries and having a length of 3,\n         // where data[1] is of type undefined:\n         [Object, undefined, Object]\n         0: Object\n         1: undefined\n         2: Object\n         length: 3\n         // calling forEach on data will result in the callback being called three\n         // times, with the index parameter matching the index of the key in the\n         // keyArray, but the second call will have undefined as first argument.\n\n         // arrayType == 'skip':\n         // data is a dense array containing two entries and having a length of 2:\n         [Object, Object]\n         0: Object\n         1: Object\n         length: 2\n         // calling forEach on data will result in the callback being called two\n         // times, with the index parameter not matching the index of the key in the\n         // keyArray.\n         */\n        getBatch: function (keyArray, onSuccess, onError, arrayType) {\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n            arrayType || (arrayType = 'sparse');\n\n            if (Object.prototype.toString.call(keyArray) != '[object Array]') {\n                onError(new Error('keyArray argument must be of type Array.'));\n            } else if (keyArray.length === 0) {\n                return onSuccess([]);\n            }\n\n            var data = [];\n            var count = keyArray.length;\n            var called = false;\n            var hasSuccess = false;\n            var result = null;\n\n            var batchTransaction = this.db.transaction([this.storeName], this.consts.READ_ONLY);\n            batchTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            batchTransaction.onabort = onError;\n            batchTransaction.onerror = onError;\n\n            var onItemSuccess = function (event) {\n                if (event.target.result || arrayType == 'dense') {\n                    data.push(event.target.result);\n                } else if (arrayType == 'sparse') {\n                    data.length++;\n                }\n                count--;\n                if (count === 0) {\n                    called = true;\n                    hasSuccess = true;\n                    result = data;\n                }\n            };\n\n            keyArray.forEach(function (key) {\n\n                var onItemError = function (err) {\n                    called = true;\n                    result = err;\n                    onError(err);\n                    batchTransaction.abort();\n                };\n\n                var getRequest = batchTransaction.objectStore(this.storeName).get(key);\n                getRequest.onsuccess = onItemSuccess;\n                getRequest.onerror = onItemError;\n\n            }, this);\n\n            return batchTransaction;\n        },\n\n        /**\n         * Fetches all entries in the store.\n         *\n         * @param {Function} [onSuccess] A callback that is called if the operation\n         *  was successful. Will receive an array of objects.\n         * @param {Function} [onError] A callback that will be called if an error\n         *  occurred during the operation.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        getAll: function (onSuccess, onError) {\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n            var getAllTransaction = this.db.transaction([this.storeName], this.consts.READ_ONLY);\n            var store = getAllTransaction.objectStore(this.storeName);\n            if (store.getAll) {\n                this._getAllNative(getAllTransaction, store, onSuccess, onError);\n            } else {\n                this._getAllCursor(getAllTransaction, store, onSuccess, onError);\n            }\n\n            return getAllTransaction;\n        },\n\n        /**\n         * Implements getAll for IDB implementations that have a non-standard\n         * getAll() method.\n         *\n         * @param {IDBTransaction} getAllTransaction An open READ transaction.\n         * @param {IDBObjectStore} store A reference to the store.\n         * @param {Function} onSuccess A callback that will be called if the\n         *  operation was successful.\n         * @param {Function} onError A callback that will be called if an\n         *  error occurred during the operation.\n         * @private\n         */\n        _getAllNative: function (getAllTransaction, store, onSuccess, onError) {\n            var hasSuccess = false,\n                result = null;\n\n            getAllTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            getAllTransaction.onabort = onError;\n            getAllTransaction.onerror = onError;\n\n            var getAllRequest = store.getAll();\n            getAllRequest.onsuccess = function (event) {\n                hasSuccess = true;\n                result = event.target.result;\n            };\n            getAllRequest.onerror = onError;\n        },\n\n        /**\n         * Implements getAll for IDB implementations that do not have a getAll()\n         * method.\n         *\n         * @param {IDBTransaction} getAllTransaction An open READ transaction.\n         * @param {IDBObjectStore} store A reference to the store.\n         * @param {Function} onSuccess A callback that will be called if the\n         *  operation was successful.\n         * @param {Function} onError A callback that will be called if an\n         *  error occurred during the operation.\n         * @private\n         */\n        _getAllCursor: function (getAllTransaction, store, onSuccess, onError) {\n            var all = [],\n                hasSuccess = false,\n                result = null;\n\n            getAllTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            getAllTransaction.onabort = onError;\n            getAllTransaction.onerror = onError;\n\n            var cursorRequest = store.openCursor();\n            cursorRequest.onsuccess = function (event) {\n                var cursor = event.target.result;\n                if (cursor) {\n                    all.push(cursor.value);\n                    cursor['continue']();\n                }\n                else {\n                    hasSuccess = true;\n                    result = all;\n                }\n            };\n            cursorRequest.onError = onError;\n        },\n\n        /**\n         * Clears the store, i.e. deletes all entries in the store.\n         *\n         * @param {Function} [onSuccess] A callback that will be called if the\n         *  operation was successful.\n         * @param {Function} [onError] A callback that will be called if an\n         *  error occurred during the operation.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        clear: function (onSuccess, onError) {\n            onError || (onError = defaultErrorHandler);\n            onSuccess || (onSuccess = defaultSuccessHandler);\n\n            var hasSuccess = false,\n                result = null;\n\n            var clearTransaction = this.db.transaction([this.storeName], this.consts.READ_WRITE);\n            clearTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            clearTransaction.onabort = onError;\n            clearTransaction.onerror = onError;\n\n            var clearRequest = clearTransaction.objectStore(this.storeName).clear();\n            clearRequest.onsuccess = function (event) {\n                hasSuccess = true;\n                result = event.target.result;\n            };\n            clearRequest.onerror = onError;\n\n            return clearTransaction;\n        },\n\n        /**\n         * Checks if an id property needs to present on a object and adds one if\n         * necessary.\n         *\n         * @param {Object} dataObj The data object that is about to be stored\n         * @private\n         */\n        _addIdPropertyIfNeeded: function (dataObj) {\n            if (typeof dataObj[this.keyPath] == 'undefined') {\n                dataObj[this.keyPath] = this._insertIdCount++ + Date.now();\n            }\n        },\n\n        /************\n         * indexing *\n         ************/\n\n        /**\n         * Returns a DOMStringList of index names of the store.\n         *\n         * @return {DOMStringList} The list of index names\n         */\n        getIndexList: function () {\n            return this.store.indexNames;\n        },\n\n        /**\n         * Checks if an index with the given name exists in the store.\n         *\n         * @param {String} indexName The name of the index to look for\n         * @return {Boolean} Whether the store contains an index with the given name\n         */\n        hasIndex: function (indexName) {\n            return this.store.indexNames.contains(indexName);\n        },\n\n        /**\n         * Normalizes an object containing index data and assures that all\n         * properties are set.\n         *\n         * @param {Object} indexData The index data object to normalize\n         * @param {String} indexData.name The name of the index\n         * @param {String} [indexData.keyPath] The key path of the index\n         * @param {Boolean} [indexData.unique] Whether the index is unique\n         * @param {Boolean} [indexData.multiEntry] Whether the index is multi entry\n         */\n        normalizeIndexData: function (indexData) {\n            indexData.keyPath = indexData.keyPath || indexData.name;\n            indexData.unique = !!indexData.unique;\n            indexData.multiEntry = !!indexData.multiEntry;\n        },\n\n        /**\n         * Checks if an actual index complies with an expected index.\n         *\n         * @param {IDBIndex} actual The actual index found in the store\n         * @param {Object} expected An Object describing an expected index\n         * @return {Boolean} Whether both index definitions are identical\n         */\n        indexComplies: function (actual, expected) {\n            var complies = ['keyPath', 'unique', 'multiEntry'].every(function (key) {\n                // IE10 returns undefined for no multiEntry\n                if (key == 'multiEntry' && actual[key] === undefined && expected[key] === false) {\n                    return true;\n                }\n                // Compound keys\n                if (key == 'keyPath' && Object.prototype.toString.call(expected[key]) == '[object Array]') {\n                    var exp = expected.keyPath;\n                    var act = actual.keyPath;\n\n                    // IE10 can't handle keyPath sequences and stores them as a string.\n                    // The index will be unusable there, but let's still return true if\n                    // the keyPath sequence matches.\n                    if (typeof act == 'string') {\n                        return exp.toString() == act;\n                    }\n\n                    // Chrome/Opera stores keyPath squences as DOMStringList, Firefox\n                    // as Array\n                    if (!(typeof act.contains == 'function' || typeof act.indexOf == 'function')) {\n                        return false;\n                    }\n\n                    if (act.length !== exp.length) {\n                        return false;\n                    }\n\n                    for (var i = 0, m = exp.length; i < m; i++) {\n                        if (!( (act.contains && act.contains(exp[i])) || act.indexOf(exp[i] !== -1) )) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                return expected[key] == actual[key];\n            });\n            return complies;\n        },\n\n        /**********\n         * cursor *\n         **********/\n\n        /**\n         * Iterates over the store using the given options and calling onItem\n         * for each entry matching the options.\n         *\n         * @param {Function} onItem A callback to be called for each match\n         * @param {Object} [options] An object defining specific options\n         * @param {String} [options.index=null] A name of an IDBIndex to operate on\n         * @param {String} [options.order=ASC] The order in which to provide the\n         *  results, can be 'DESC' or 'ASC'\n         * @param {Boolean} [options.autoContinue=true] Whether to automatically\n         *  iterate the cursor to the next result\n         * @param {Boolean} [options.filterDuplicates=false] Whether to exclude\n         *  duplicate matches\n         * @param {IDBKeyRange} [options.keyRange=null] An IDBKeyRange to use\n         * @param {Boolean} [options.writeAccess=false] Whether grant write access\n         *  to the store in the onItem callback\n         * @param {Function} [options.onEnd=null] A callback to be called after\n         *  iteration has ended\n         * @param {Function} [options.onError=throw] A callback to be called\n         *  if an error occurred during the operation.\n         * @param {Number} [options.limit=Infinity] Limit the number of returned\n         *  results to this number\n         * @param {Number} [options.offset=0] Skip the provided number of results\n         *  in the resultset\n         * @param {Boolean} [options.allowItemRejection=false] Allows the onItem\n         * function to return a Boolean to accept or reject the current item\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        iterate: function (onItem, options) {\n            options = mixin({\n                index: null,\n                order: 'ASC',\n                autoContinue: true,\n                filterDuplicates: false,\n                keyRange: null,\n                writeAccess: false,\n                onEnd: null,\n                onError: defaultErrorHandler,\n                limit: Infinity,\n                offset: 0,\n                allowItemRejection: false\n            }, options || {});\n\n            var directionType = options.order.toLowerCase() == 'desc' ? 'PREV' : 'NEXT';\n            if (options.filterDuplicates) {\n                directionType += '_NO_DUPLICATE';\n            }\n\n            var hasSuccess = false;\n            var cursorTransaction = this.db.transaction([this.storeName], this.consts[options.writeAccess ? 'READ_WRITE' : 'READ_ONLY']);\n            var cursorTarget = cursorTransaction.objectStore(this.storeName);\n            if (options.index) {\n                cursorTarget = cursorTarget.index(options.index);\n            }\n            var recordCount = 0;\n\n            cursorTransaction.oncomplete = function () {\n                if (!hasSuccess) {\n                    options.onError(null);\n                    return;\n                }\n                if (options.onEnd) {\n                    options.onEnd();\n                } else {\n                    onItem(null);\n                }\n            };\n            cursorTransaction.onabort = options.onError;\n            cursorTransaction.onerror = options.onError;\n\n            var cursorRequest = cursorTarget.openCursor(options.keyRange, this.consts[directionType]);\n            cursorRequest.onerror = options.onError;\n            cursorRequest.onsuccess = function (event) {\n                var cursor = event.target.result;\n                if (cursor) {\n                    if (options.offset) {\n                        cursor.advance(options.offset);\n                        options.offset = 0;\n                    } else {\n                        var onItemReturn = onItem(cursor.value, cursor, cursorTransaction);\n                        if (!options.allowItemRejection || onItemReturn !== false) {\n                            recordCount++;\n                        }\n                        if (options.autoContinue) {\n                            if (recordCount + options.offset < options.limit) {\n                                cursor['continue']();\n                            } else {\n                                hasSuccess = true;\n                            }\n                        }\n                    }\n                } else {\n                    hasSuccess = true;\n                }\n            };\n\n            return cursorTransaction;\n        },\n\n        /**\n         * Runs a query against the store and passes an array containing matched\n         * objects to the success handler.\n         *\n         * @param {Function} onSuccess A callback to be called when the operation\n         *  was successful.\n         * @param {Object} [options] An object defining specific options\n         * @param {String} [options.index=null] A name of an IDBIndex to operate on\n         * @param {String} [options.order=ASC] The order in which to provide the\n         *  results, can be 'DESC' or 'ASC'\n         * @param {Boolean} [options.filterDuplicates=false] Whether to exclude\n         *  duplicate matches\n         * @param {IDBKeyRange} [options.keyRange=null] An IDBKeyRange to use\n         * @param {Function} [options.onError=throw] A callback to be called\n         *  if an error occurred during the operation.\n         * @param {Number} [options.limit=Infinity] Limit the number of returned\n         *  results to this number\n         * @param {Number} [options.offset=0] Skip the provided number of results\n         *  in the resultset\n         * @param {Function} [options.filter=null] A custom filter function to\n         *  apply to query resuts before returning. Must return `false` to reject\n         *  an item. Can be combined with keyRanges.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        query: function (onSuccess, options) {\n            var result = [],\n                processedItems = 0;\n            options = options || {};\n            options.autoContinue = true;\n            options.writeAccess = false;\n            options.allowItemRejection = !!options.filter;\n            options.onEnd = function () {\n                onSuccess(result, processedItems);\n            };\n            return this.iterate(function (item) {\n                processedItems++;\n                var accept = options.filter ? options.filter(item) : true;\n                if (accept !== false) {\n                    result.push(item);\n                }\n                return accept;\n            }, options);\n        },\n\n        /**\n         *\n         * Runs a query against the store, but only returns the number of matches\n         * instead of the matches itself.\n         *\n         * @param {Function} onSuccess A callback to be called if the opration\n         *  was successful.\n         * @param {Object} [options] An object defining specific options\n         * @param {String} [options.index=null] A name of an IDBIndex to operate on\n         * @param {IDBKeyRange} [options.keyRange=null] An IDBKeyRange to use\n         * @param {Function} [options.onError=throw] A callback to be called if an error\n         *  occurred during the operation.\n         * @returns {IDBTransaction} The transaction used for this operation.\n         */\n        count: function (onSuccess, options) {\n\n            options = mixin({\n                index: null,\n                keyRange: null\n            }, options || {});\n\n            var onError = options.onError || defaultErrorHandler;\n\n            var hasSuccess = false,\n                result = null;\n\n            var cursorTransaction = this.db.transaction([this.storeName], this.consts.READ_ONLY);\n            cursorTransaction.oncomplete = function () {\n                var callback = hasSuccess ? onSuccess : onError;\n                callback(result);\n            };\n            cursorTransaction.onabort = onError;\n            cursorTransaction.onerror = onError;\n\n            var cursorTarget = cursorTransaction.objectStore(this.storeName);\n            if (options.index) {\n                cursorTarget = cursorTarget.index(options.index);\n            }\n            var countRequest = cursorTarget.count(options.keyRange);\n            countRequest.onsuccess = function (evt) {\n                hasSuccess = true;\n                result = evt.target.result;\n            };\n            countRequest.onError = onError;\n\n            return cursorTransaction;\n        },\n\n        /**************/\n        /* key ranges */\n        /**************/\n\n        /**\n         * Creates a key range using specified options. This key range can be\n         * handed over to the count() and iterate() methods.\n         *\n         * Note: You must provide at least one or both of \"lower\" or \"upper\" value.\n         *\n         * @param {Object} options The options for the key range to create\n         * @param {*} [options.lower] The lower bound\n         * @param {Boolean} [options.excludeLower] Whether to exclude the lower\n         *  bound passed in options.lower from the key range\n         * @param {*} [options.upper] The upper bound\n         * @param {Boolean} [options.excludeUpper] Whether to exclude the upper\n         *  bound passed in options.upper from the key range\n         * @param {*} [options.only] A single key value. Use this if you need a key\n         *  range that only includes one value for a key. Providing this\n         *  property invalidates all other properties.\n         * @return {IDBKeyRange} The IDBKeyRange representing the specified options\n         */\n        makeKeyRange: function (options) {\n            /*jshint onecase:true */\n            var keyRange,\n                hasLower = typeof options.lower != 'undefined',\n                hasUpper = typeof options.upper != 'undefined',\n                isOnly = typeof options.only != 'undefined';\n\n            switch (true) {\n                case isOnly:\n                    keyRange = this.keyRange.only(options.only);\n                    break;\n                case hasLower && hasUpper:\n                    keyRange = this.keyRange.bound(options.lower, options.upper, options.excludeLower, options.excludeUpper);\n                    break;\n                case hasLower:\n                    keyRange = this.keyRange.lowerBound(options.lower, options.excludeLower);\n                    break;\n                case hasUpper:\n                    keyRange = this.keyRange.upperBound(options.upper, options.excludeUpper);\n                    break;\n                default:\n                    throw new Error('Cannot create KeyRange. Provide one or both of \"lower\" or \"upper\" value, or an \"only\" value.');\n            }\n\n            return keyRange;\n\n        }\n\n    };\n\n    /** helpers **/\n    var empty = {};\n\n    function mixin (target, source) {\n        var name, s;\n        for (name in source) {\n            s = source[name];\n            if (s !== empty[name] && s !== target[name]) {\n                target[name] = s;\n            }\n        }\n        return target;\n    }\n\n    function hasVersionError(errorEvent) {\n        if ('error' in errorEvent.target) {\n            return errorEvent.target.error.name == 'VersionError';\n        } else if ('errorCode' in errorEvent.target) {\n            return errorEvent.target.errorCode == 12;\n        }\n        return false;\n    }\n\n    IDBStore.prototype = proto;\n    IDBStore.version = proto.version;\n\n    return IDBStore;\n\n}, this);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global document, tizen, console, window*/\n\n/**\n * Main application module.\n * Provides a namespace for other application modules.\n * Handles application life cycle.\n *\n * @module app\n * @requires {@link app.model.battery}\n * @requires {@link app.ui}\n * @namespace app\n */\n\nrequire('../../www/tests/lib/geomock/geomock');\nrequire('./mock');\nrequire('./model/models');\nrequire('./ui/app.ui');\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineApp(app) {\n    'use strict';\n\n    /**\n     * Battery model module reference.\n     *\n     * @private\n     * @type {object}\n     */\n    var modelBattery = app.model.battery,\n\n        /**\n         * Workout model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelWorkout = app.model.workout,\n\n        modelNetwork = app.model.network,\n\n        hardwareDriver = null,\n\n        /**\n         * UI module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        ui = app.ui;\n\n    /**\n     * Closes application.\n     *\n     * @memberof app\n     * @public\n     */\n    app.exit = function exit() {\n        hardwareDriver.exit();\n    };\n\n    /**\n     * Handles tizenhwkey event.\n     *\n     * Closes application if the back device button is pressed.\n     *\n     * @private\n     * @param {Event} e\n     */\n    function onHwKeyEvent(e) {\n        if (e.keyName === 'back') {\n            ui.toggleClosePopup();\n        }\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        document.addEventListener('tizenhwkey', onHwKeyEvent);\n\n        document.addEventListener('backbutton', function (evt) {\n            ui.toggleClosePopup();\n        }, false);\n    }\n\n    /**\n     * Initializes app module.\n     *\n     * Calls a method responsible for event listeners registering.\n     * Starts the battery model initialization.\n     *\n     * @memberof app\n     * @public\n     */\n    app.init = function init() {\n        var platform = Platform.get(),\n            driverFactory = new DriverFactory(platform);\n\n        hardwareDriver = driverFactory.buildHardwareDriver(platform);\n\n        modelBattery.init(driverFactory.buildBatteryDriver(platform));\n        modelNetwork.init(driverFactory.buildNetworkDriver(platform));\n        modelWorkout.init(hardwareDriver);\n        bindEvents();\n        ui.init();\n    };\n\n    if (typeof cordova !== 'undefined') {\n        document.addEventListener(\"deviceready\", app.init);\n    } else {\n        window.addEventListener('load', app.init);\n    }\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global window*/\n\n/**\n * Application common calculations module.\n * Provides methods that are necessary for navigation.\n *\n * @module app.common.calculations\n * @namespace app.common.calculations\n * @memberof app.common\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n// strict mode wrapper function\n(function defineAppCommonCalculations(app) {\n    'use strict';\n\n    /**\n     * Earth radius constant.\n     *\n     * @private\n     * @const {number}\n     */\n    var EARTH_RADIUS = 6371000,\n\n    /**\n     * Meters unit constant.\n     *\n     * @private\n     * @const {string}\n     */\n    METERS_UNIT = 'm',\n\n    /**\n     * Kilometers unit constant.\n     *\n     * @private\n     * @const {string}\n     */\n    KILOMETERS_UNIT = 'km',\n\n    /**\n     * Calculations module reference.\n     *\n     * @memberof app.common.calculations\n     * @private\n     * @type {object}\n     */\n    calculations = null;\n\n    // create namespace for the module\n    app.common = app.common || {};\n    app.common.calculations = app.common.calculations || {};\n    calculations = app.common.calculations;\n\n    /**\n     * Converts the number value expressed in radians to degrees.\n     *\n     * @private\n     * @param {number} value\n     * @returns {number}\n     */\n    function toDegrees(value) {\n        return value * 180 / Math.PI;\n    }\n\n    /**\n     * Converts the number value expressed in degrees to radians.\n     *\n     * @private\n     * @param {number} value\n     * @returns {number}\n     */\n    function toRadians(value) {\n        return value * Math.PI / 180;\n    }\n\n    /**\n     * Formats distance value to be displayed in meters or kilometers.\n     *\n     * @private\n     * @param {number} distance Distance in meters.\n     * @returns {number}\n     */\n    function formatDistance(distance) {\n        if (distance >= 1000) {\n            distance /= 1000;\n        }\n        return distance.toFixed(0);\n    }\n\n    /**\n     * Formats unit value to represent meters or kilometers.\n     *\n     * @private\n     * @param {number} distance Distance in meters.\n     * @returns {string}\n     */\n    function formatUnit(distance) {\n        if (distance >= 1000) {\n            return KILOMETERS_UNIT;\n        }\n        return METERS_UNIT;\n    }\n\n    /**\n     * Calculates the angle based on the start and destination position.\n     *\n     * @memberof app.common.calculations\n     * @public\n     * @param {object} start\n     * @param {number} start.latitude\n     * @param {number} start.longitude\n     * @param {object} destination\n     * @param {number} destination.latitude\n     * @param {number} destination.longitude\n     * @returns {number}\n     */\n    calculations.calculateAngle = function calculateAngle(start, destination) {\n        var sLon = toRadians(start.longitude),\n            dLon = toRadians(destination.longitude),\n            sLat = toRadians(start.latitude),\n            dLat = toRadians(destination.latitude),\n            deltaLon = dLon - sLon;\n\n        if (deltaLon > Math.PI) {\n            deltaLon -= 2 * Math.PI;\n        } else if (deltaLon < -Math.PI) {\n            deltaLon += 2 * Math.PI;\n        }\n\n        return toDegrees((Math.atan2(\n            deltaLon,\n            Math.log(\n                Math.tan(dLat / 2 + Math.PI / 4) /\n                Math.tan(sLat / 2 + Math.PI / 4)\n            )\n        )));\n    };\n\n    /**\n     * Calculates the distance between two positions\n     * based on its coordinates.\n     *\n     * @memberof app.common.calculations\n     * @public\n     * @see http://www.sunearthtools.com/tools/distance.php\n     * @param {object} start\n     * @param {number} start.latitude\n     * @param {number} start.longitude\n     * @param {object} destination\n     * @param {number} destination.latitude\n     * @param {number} destination.longitude\n     * @returns {number}\n     */\n    calculations.calculateDistance =\n            function calculateDistance(start, destination) {\n        var sLon = toRadians(start.longitude),\n            dLon = toRadians(destination.longitude),\n            sLat = toRadians(start.latitude),\n            dLat = toRadians(destination.latitude),\n            distance = EARTH_RADIUS *\n                Math.acos(\n                    Math.sin(sLat) * Math.sin(dLat) +\n                    Math.cos(sLat) * Math.cos(dLat) * Math.cos(dLon - sLon)\n                );\n\n        return {\n            raw: distance,\n            formatted: formatDistance(distance),\n            unit: formatUnit(distance)\n        };\n    };\n\n    /**\n     * Obtains angle from rotation.\n     *\n     * @memberof app.common.calculations\n     * @param {number} value\n     * @returns {number}\n     */\n    calculations.angleFromRotation = function angleFromRotation(value) {\n        var angle = -value % 360;\n\n        if (angle < 0) {\n            angle += 360;\n        }\n\n        return angle;\n    };\n\n    /**\n     * Calculates angle for navigation path indicator.\n     *\n     * @memberof app.common.calculations\n     * @param {number} partialPath\n     * @param {number} totalPath\n     * @param {number} totalAngle\n     * @returns {number}\n     */\n    calculations.calculatePathAngle =\n        function calculatePathAngle(partialPath, totalPath, totalAngle) {\n\n        return partialPath * totalAngle / totalPath;\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* global window*/\n\n/**\n * Application common events module.\n * Provides common methods related to events triggering.\n *\n * @module app.common.events\n * @namespace app.common.events\n * @memberof app.common\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n// strict mode wrapper function\n(function defineAppCommonEvents(app) {\n    'use strict';\n\n    /**\n     * Events module reference.\n     *\n     * @memberof app.common\n     * @private\n     * @type {object}\n     */\n    var events = null;\n\n    // create namespace for the module\n    app.common = app.common || {};\n    app.common.events = app.common.events || {};\n    events = app.common.events;\n\n    /**\n     * Dispatches an event.\n     *\n     * @memberof app.common.events\n     * @public\n     * @param {string} eventName Event name.\n     * @param {*} data Detailed data.\n     */\n    events.dispatchEvent = function dispatchEvent(eventName, data) {\n        var customEvent = new window.CustomEvent(eventName, {\n            detail: data\n        });\n\n        window.dispatchEvent(customEvent);\n    };\n\n})(window.app);\n","window.addEventListener('load', function(){\n    navigator.geolocation.delay = 1000;\n    navigator.geolocation.repeat = true;\n\n    var startTime = 1551018055000;\n\n    navigator.geolocation.waypoints = [\n        {coords : {latitude : 45.8849114, longitude : 19.2545559, accuracy: 65 }, timestamp: startTime},\n        {coords : {latitude : 45.8856601, longitude : 19.2553514, accuracy: 65 }, timestamp: startTime + 30000},\n        {coords : {latitude : 45.8849114, longitude : 19.2545559, accuracy: 65 }, timestamp: startTime + 55000},\n        {coords : {latitude : 45.8856601, longitude : 19.2553514, accuracy: 65 }, timestamp: startTime + 75000},\n        {coords : {latitude : 45.8849114, longitude : 19.2545559, accuracy: 65 }, timestamp: startTime + 90000},\n    ];\n});\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global console, window, tizen*/\n\n/**\n * Application battery model module.\n * It is responsible for obtaining information about device battery state.\n *\n * @module app.model.battery\n * @requires {@link app.common.events}\n * @namespace app.model.battery\n * @memberof app.model\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppModelBattery(app) {\n    'use strict';\n\n        /**\n         * Battery model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        var modelBattery = null,\n\n        /**\n         * Common events module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonEvents = app.common.events,\n\n        driver = null;\n\n    // create namespace for the module\n    app.model = app.model || {};\n    app.model.battery = app.model.battery || {};\n    modelBattery = app.model.battery;\n\n    /**\n     * Initializes the battery model module.\n     *\n     * @memberof app.model.battery\n     * @public\n     */\n    modelBattery.init = function init(driver) {\n        driver = driver;\n        driver.init();\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, console, navigator, setTimeout*/\n\n/**\n * Application geolocation model module.\n * It is responsible for providing information about user location.\n *\n * @module app.model.geolocation\n * @requires {@link app.common.events}\n * @requires {@link app.common.calculations}\n * @namespace app.model.geolocation\n * @memberof app.model\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppModelGeolocation(app) {\n    'use strict';\n\n    /**\n     * Geolocation checking interval (in milliseconds).\n     *\n     * @private\n     * @const {number}\n     */\n    var GEO_CHECKING_INTERVAL = 1000,\n\n        /**\n         * Geolocation checking counter.\n         * Defines max number of checking interval occurrences.\n         *\n         * @private\n         * @const {number}\n         */\n        GEO_CHECKING_COUNTER = 5,\n\n        /**\n         * Geolocation model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelGeolocation = null,\n\n        /**\n         * Common events module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonEvents = app.common.events,\n\n        /**\n         * Common calculations module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonCalculations = app.common.calculations,\n\n        /**\n         * Geolocation API object.\n         *\n         * @private\n         * @type {object}\n         */\n        geolocation = null,\n\n        /**\n         * Current position data.\n         *\n         * @private\n         * @type {Position}\n         */\n        currentPosition = null,\n\n        /**\n         * Stores information about number of checking interval occurrences.\n         *\n         * @private\n         * @type {number}\n         */\n        checkingCounter = 0;\n\n    // create namespace for the module\n    app.model = app.model || {};\n    app.model.geolocation = app.model.geolocation || {};\n    modelGeolocation = app.model.geolocation;\n\n    /**\n     * Checks if the current position is equal to the one given as parameter.\n     * Returns true if it is, false otherwise.\n     *\n     * @param {Position} position\n     * @returns {boolean}\n     */\n    function isPositionEqual(position) {\n        if (currentPosition &&\n            (currentPosition.coords.latitude === position.coords.latitude ||\n            currentPosition.coords.longitude === position.coords.longitude)) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Performs action on get current position success.\n     *\n     * @private\n     * @param {Position} position\n     * @fires model.geolocation.current.position.changed\n     * @fires model.geolocation.current.destination.reached\n     * @fires model.geolocation.position.available\n     */\n    function onGetCurrentPositionSuccess(position) {\n        if (!isPositionEqual(position)) {\n            currentPosition = position;\n            commonEvents.dispatchEvent(\n                'model.geolocation.current.position.changed'\n            );\n        }\n        commonEvents.dispatchEvent('model.geolocation.position.available');\n        checkingCounter = 0;\n        //setTimeout(getGeoPosition, GEO_CHECKING_INTERVAL);\n    }\n\n    /**\n     * Performs action on get current position error.\n     *\n     * @private\n     * @fires model.geolocation.position.unavailable\n     * @fires model.geolocation.position.lost\n     */\n    function onGetCurrentPositionError(error) {\n        commonEvents.dispatchEvent('model.geolocation.position.unavailable');\n        checkingCounter += 1;\n        if (checkingCounter === GEO_CHECKING_COUNTER) {\n            commonEvents.dispatchEvent('model.geolocation.position.lost');\n        }\n\n        console.warn(error);\n        //setTimeout(getGeoPosition, GEO_CHECKING_INTERVAL);\n    }\n\n    /**\n     * Uses Geolocation API in order to obtain information\n     * about changes of the current position.\n     *\n     * @private\n     */\n    function getGeoPosition() {\n        try {\n            geolocation.watchPosition(\n                onGetCurrentPositionSuccess,\n                onGetCurrentPositionError,\n                {\n                    maximumAge :GEO_CHECKING_INTERVAL,\n                    enableHighAccuracy: true,\n                    timeout: GEO_CHECKING_INTERVAL\n                }\n            );\n        } catch (error) {\n            console.warn('Couldn\\'t get geolocation position.', error);\n        }\n    }\n\n    /**\n     * Returns current position.\n     *\n     * @memberof app.model.geolocation\n     * @public\n     * @returns {object}\n     */\n    modelGeolocation.getCurrentPosition = function getCurrentPosition() {\n        return currentPosition;\n    };\n\n\n    /**\n     * Initializes the geolocation model module.\n     *\n     * @memberof app.model.geolocation\n     * @public\n     * @fires model.geolocation.available\n     * @fires model.geolocation.unavailable\n     */\n    modelGeolocation.init = function init() {\n        if (navigator.geolocation) {\n            geolocation = navigator.geolocation;\n            commonEvents.dispatchEvent('model.geolocation.available');\n            getGeoPosition();\n        } else {\n            commonEvents.dispatchEvent('model.geolocation.unavailable');\n        }\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, console, tizen*/\n\n/**\n * Application network model module.\n * It is responsible for providing information about user location.\n *\n * @module app.model.network\n * @requires {@link app.common.events}\n * @namespace app.model.network\n * @memberof app.model\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppModelNetwork(app) {\n    'use strict';\n\n        /**\n         * Common events module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        var commonEvents = app.common.events,\n\n        modelNetwork = null;\n\n    // create namespace for the module\n    app.model = app.model || {};\n    app.model.network = app.model.network || {};\n    modelNetwork = app.model.network;\n    modelNetwork.driver = null;\n\n\n    /**\n     * Checks available network type.\n     *\n     * @private\n     */\n    function checkNetworkType() {\n        return modelNetwork.driver.checkNetworkType();\n    }\n\n    /**\n     * Checks whether the network type has different value than 'NONE'.\n     *\n     * @memberof app.model.network\n     * @public\n     * @returns {boolean}\n     */\n    modelNetwork.isNetworkAvailable = function isNetworkAvailable() {\n        return modelNetwork.driver.isNetworkAvailable();\n    };\n\n    /**\n     * Returns available network type;\n     *\n     * @memberof app.model.network\n     * @public\n     * @returns {string}\n     */\n    modelNetwork.getNetworkType = function getNetworkType() {\n        return modelNetwork.driver.getNetworkType();\n    };\n\n    /**\n     * Initializes the network model module.\n     *\n     * @memberof app.model.network\n     * @public\n     */\n    modelNetwork.init = function init(driver) {\n        modelNetwork.driver = driver;\n        modelNetwork.driver.init();\n    };\n\n})(window.app);\n","/*global window, console, geolocation, setTimeout*/\n\n/**\n * Application sync model module.\n * It is responsible for syncing workouts with the server.\n *\n * @module app.model.geolocation\n * @requires {@link app.common.events}\n * @requires {@link app.common.calculations}\n * @namespace app.model.geolocation\n * @memberof app.model\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppModelSync(app) {\n    'use strict';\n\n        /**\n         * Workout model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        var modelSync = null,\n\n        /**\n         * Geolocation model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelWorkout = app.model.workout,\n\n        /**\n         * Common events module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonEvents = app.common.events,\n\n        modelNetwork = app.model.network,\n\n        syncUrls = {\n            login: '',\n            upload: ''\n        };\n\n    // create namespace for the module\n    app.model = app.model || {};\n    app.model.sync = app.model.sync || {};\n    modelSync = app.model.sync;\n\n\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        window.addEventListener(\n            'model.workout.getlist.successful',\n            function(e){\n                e.stopPropagation();\n                var workouts = e.detail;\n                uploadWorkouts(workouts);\n            },\n            'model.workout.getlist.failed',\n            function(e){\n                e.stopPropagation();\n                commonEvents.dispatchEvent('model.sync.upload.failed');\n            }\n        );\n    }\n\n    function getToken(){\n        return localStorage.getItem('token');\n    }\n\n    function createAuthHeader(){\n        var token = getToken() || '',\n            header = {\n                key: 'Authorization',\n                value: 'Bearer ' + token,\n            };\n\n        return token.length ? header : false;\n    }\n\n    /**\n     * Initializes the workout model module.\n     *\n     * @memberof app.model.workout\n     * @public\n     * @fires model.sync.login.successful\n     * @fires model.sync.login.failed\n     * @param {string} loginUrl\n     * @param {string} uploadUrl\n     */\n    modelSync.init = function init(loginUrl, uploadUrl) {\n        syncUrls.login = loginUrl;\n        syncUrls.upload = uploadUrl;\n\n        bindEvents();\n    };\n\n    modelSync.login = function login(email, password) {\n        var client = new XMLHttpRequest(),\n            localStorage = window.localStorage;\n\n        /* Check the response status */\n        client.onreadystatechange = function() {\n            if (client.readyState == 4) {\n                if (client.status == 200) {\n\n                    localStorage.setItem('token', JSON.parse(client.response));\n                    commonEvents.dispatchEvent('model.sync.login.successful', { token: client.response });\n                }\n                else {\n                    commonEvents.dispatchEvent('model.sync.login.failed');\n                }\n            }\n        };\n\n    \tclient.onerror = function(e) {\n\t\t\tconsole.log(e);\n        };\n\n        var data = \"email=\" + email + \"&\" + \"password=\" + password;\n\n        client.open('POST', syncUrls.login, true);\n        client.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n        client.send(data); /* Send to server */\n\n    };\n\n    modelSync.sync = function(){\n        // Disabled until network availability is fixed for cordova\n        // if( modelNetwork.isNetworkAvailable() ){\n            modelWorkout.getItemsToSync();\n        // }\n\n    }\n\n    function uploadWorkouts(workouts){\n        var client = new XMLHttpRequest(),\n            authHeaders = createAuthHeader();\n\n            if(authHeaders === false){\n                commonEvents.dispatchEvent('model.sync.login.required');\n               return false;\n            }\n\n            /* Check the response status */\n            client.onreadystatechange = function() {\n                if (client.readyState == 4){\n                    console.log('Response: ' + client.status);\n                    switch(client.status){\n                        case 200:\n                            modelWorkout.clear();\n                            commonEvents.dispatchEvent('model.sync.upload.successful', true);\n                            break;\n                        case 401:\n                            commonEvents.dispatchEvent('model.sync.login.required');\n                            break;\n                        default:\n                            commonEvents.dispatchEvent('model.sync.upload.failed');\n                            break;\n                    }\n                }\n            };\n\n            client.open('POST', syncUrls.upload, true);\n\n            var payload = JSON.stringify({ data: workouts });\n\n            client.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n            client.setRequestHeader(\"Accept\", \"application/json\");\n            client.setRequestHeader(authHeaders.key, authHeaders.value);\n            console.log('Sending data to the server');\n            client.send(payload); /* Send to server */\n    }\n\n})(window.app);\n","import {CyclingWorkout} from \"../workout/app.workout.cycling_workout\";\nimport {RunningWorkout} from \"../workout/app.workout.running_workout\";\nimport {WORKOUT_TYPE_CYCLING, WORKOUT_TYPE_RUNNING} from \"../workout/app.workout.base_workout\";\nlet IDBStore = require( \"../../../node_modules/idb-wrapper/idbstore\");\n\nrequire('../common/app.common.calculations');\n/*global window, console, geolocation, setTimeout*/\n\n/**\n * Application geolocation model module.\n * It is responsible for providing information about user location.\n *\n * @module app.model.geolocation\n * @requires {@link app.common.events}\n * @requires {@link app.common.calculations}\n * @namespace app.model.geolocation\n * @memberof app.model\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppModelWorkout(app) {\n    'use strict';\n\n    /**\n     * Geolocation checking interval (in milliseconds).\n     *\n     * @private\n     * @const {number}\n     */\n\n        /**\n         * Workout model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        var modelWorkout = null,\n\n        /**\n         * Geolocation model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelGeolocation = app.model.geolocation,\n\n        /**\n         * Common events module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonEvents = app.common.events,\n\n        /**\n         *\n         * @type {HardwareDriver}\n         */\n        hardwareDriver = null,\n\n        /**\n         * Workout data.\n         *\n         * @private\n         * @type {BaseWorkout}\n         */\n        workout = null,\n\n        workoutDB = null,\n\n        isDBready = false;\n\n    // create namespace for the module\n    app.model = app.model || {};\n    app.model.workout = app.model.workout || {};\n    modelWorkout = app.model.workout;\n\n    modelWorkout.WORKOUT_TYPE_RUNNING = 1;\n    modelWorkout.WORKOUT_TYPE_CYCLING = 2;\n\n    modelWorkout.WORKOUT_STATUS_UNSAVED = 0;\n    modelWorkout.WORKOUT_STATUS_SAVED = 1;\n    modelWorkout.WORKOUT_STATUS_SYNCED = 2;\n\n\n    /**\n     * Handles model.geolocation.position.available event.\n     *\n     * @private\n     * @fires model.workout.updateui\n     */\n    function updateUI(){\n        if(workout){\n            commonEvents.dispatchEvent('model.workout.updateui', workout);\n        }\n    }\n\n    /**\n     * Handles model.geolocation.position.available event.\n     *\n     * @private\n     */\n    function onModelGeolocationPositionAvailable() {\n        var currentPosition = modelGeolocation.getCurrentPosition();\n\n        if(workout && workout.isActive()){\n            var point = new Point(\n                0,\n                currentPosition.coords.latitude,\n                currentPosition.coords.longitude,\n                0,\n                currentPosition.coords.altitude || 0,\n                currentPosition.timestamp\n            );\n\n            workout.addPoint(point);\n            updateUI();\n        }\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        window.addEventListener(\n            'model.geolocation.position.available',\n            onModelGeolocationPositionAvailable\n        );\n    }\n\n    function initDatabase() {\n        workoutDB = new IDBStore({\n            dbVersion: 1,\n            storeName: 'workouts',\n            keyPath: 'id',\n            autoIncrement: true,\n            onStoreReady: function(){\n                commonEvents.dispatchEvent('model.workout.dbready');\n                isDBready = true;\n\n            }\n        });\n    }\n    /**\n     * Initializes the workout model module.\n     *\n     * @memberof app.model.workout\n     * @public\n     * @fires model.geolocation.available\n     * @fires model.geolocation.unavailable\n     */\n    modelWorkout.init = function init(driver) {\n        hardwareDriver = driver;\n        hardwareDriver.init();\n        bindEvents();\n        initDatabase();\n    };\n\n    modelWorkout.start = function start(type) {\n        switch(type){\n            case WORKOUT_TYPE_CYCLING:\n                workout = new CyclingWorkout();\n                break;\n            case WORKOUT_TYPE_RUNNING:\n                workout = new RunningWorkout();\n                break;\n        }\n\n        workout.start();\n        updateUI();\n        hardwareDriver.backgroundRunEnable();\n    };\n\n    /**\n     *\n     * @fires model.workout.paused\n     */\n    modelWorkout.togglePause = function togglePause(){\n        if(!workout.isActive()){\n            hardwareDriver.backgroundRunEnable();\n            commonEvents.dispatchEvent('model.workout.resumed');\n            workout.resume();\n        }\n        else{\n            commonEvents.dispatchEvent('model.workout.paused');\n            workout.pause();\n            hardwareDriver.backgroundRunDisable();\n        }\n    };\n\n    /**\n     *\n     * @returns {boolean}\n     */\n    modelWorkout.isHeartRateAvailable = function(){\n        return hardwareDriver.isHeartRateAvailable();\n    };\n\n    modelWorkout.save = function save(){\n        workout.save();\n\n        var onsuccess = function(id){\n            console.log('Successfully inserted! insertId is: ' + id);\n            commonEvents.dispatchEvent('model.workout.save.successful', true);\n        };\n        var onerror = function(error){\n            console.log('Workout save failed!', error);\n            commonEvents.dispatchEvent('model.workout.save.failed');\n        };\n\n        workoutDB.put(workout.toObject(), onsuccess, onerror);\n\n        return false;\n    };\n\n    modelWorkout.clear = function clear(){\n        var onsuccess = function () {\n            console.log('Database celared');\n            commonEvents.dispatchEvent('model.workout.clear.successful');\n        };\n        var onerror = function (error) {\n            console.log('Database clear failed!', error);\n            commonEvents.dispatchEvent('model.workout.clear.failed');\n        };\n\n        workoutDB.clear(onsuccess, onerror);\n    };\n\n    modelWorkout.getList = function getList( status ) {\n        var onsuccess = function (data) {\n            data = data.filter(function(item){\n                return item.status == status;\n            });\n\n            commonEvents.dispatchEvent('model.workout.getlist.successful', data);\n        };\n        var onerror = function (error) {\n            console.log('Workout save failed!', error);\n            commonEvents.dispatchEvent('model.workout.getlist.failed');\n        };\n\n        workoutDB.getAll(onsuccess, onerror);\n    };\n\n    modelWorkout.getItemsToSync = function getItemsToSync( ) {\n        return modelWorkout.getList( modelWorkout.WORKOUT_STATUS_SAVED );\n    };\n\n    modelWorkout.getWorkout = function getWorkout() {\n        return workout;\n    };\n\n})(window.app);\n","require('../app.drivers.battery')\n\n;(function(root){\n    var BatteryDriverAndroid = function(){\n    };\n\n    var proto = new BatteryDriver();\n\n    proto.bind = function(){\n        var _this = this;\n\n        document.addEventListener(\"deviceready\", function(){\n            window.addEventListener(\"batterystatus\", onBatteryStatus, false);\n\n            function onBatteryStatus(status) {\n                _this.level = status.level;\n            }\n\n            window.addEventListener(\"batterylow\", onBatteryLow, false);\n\n            function onBatteryLow(status) {\n                _this.commonEvents.dispatchEvent('model.battery.low');\n            }\n        }, false);\n    }\n\n    BatteryDriverAndroid.prototype = proto;\n    root.BatteryDriverAndroid = BatteryDriverAndroid;\n})(window);\n","require('../app.drivers.hardware')\n\n;(function (root) {\n    var HardwareDriverAndroid = function () {\n        this.commonEvents = window.app.common.events;\n    };\n\n    var proto = new HardwareDriver();\n\n    proto.bind = function () {\n        cordova.plugins.backgroundMode.on('activate', function () {\n            console.log('activate background mode');\n            cordova.plugins.backgroundMode.disableWebViewOptimizations();\n        });\n    };\n    proto.isHeartRateAvailable = function () {\n        return false;\n    };\n    proto.backgroundRunEnable = function () {\n        cordova.plugins.backgroundMode.enable();\n    };\n    proto.backgroundRunDisable = function () {\n        cordova.plugins.backgroundMode.disable();\n    };\n    proto.exit = function(){\n        try {\n            navigator.app.exitApp();\n        } catch (error) {\n            console.warn('Application exit failed.', error.message);\n        }\n    };\n\n    HardwareDriverAndroid.prototype = proto;\n    root.HardwareDriverAndroid = HardwareDriverAndroid;\n})(window);\n","require('../app.drivers.network')\n\n;(function(root){\n    var NetworkDriverAndroid = function(){\n\n    };\n\n    var proto = new NetworkDriver();\n\n    proto.bind = function(){\n        var _this = this;\n\n        document.addEventListener(\"offline\",\n        function(){\n            _this.onNetworkTypeChange()\n        }, false);\n        document.addEventListener(\"online\",\n        function(){\n            _this.onNetworkTypeChange()\n        }, false);\n    };\n\n    proto.isNetworkAvailable = function () {\n        return navigator.connection.type !== Connection.NONE;\n    };\n\n    proto.onNetworkTypeChange = function(network) {\n        this.networkType = navigator.connection.type;\n        this.commonEvents.dispatchEvent('model.network.type.changed');\n    };\n\n    proto.onGetNetworkTypeSuccess = function(network) {\n        this.networkType = navigator.connection.type;\n        this.commonEvents.dispatchEvent('model.network.initialized');\n    };\n\n    NetworkDriverAndroid.prototype = proto;\n    root.NetworkDriverAndroid = NetworkDriverAndroid;\n})(window);\n","require('./android/app.drivers.android.battery');\nrequire('./android/app.drivers.android.network');\nrequire('./android/app.drivers.android.hardware');\nrequire('./tizen/app.drivers.tizen.battery');\nrequire('./tizen/app.drivers.tizen.network');\nrequire('./tizen/app.drivers.tizen.hardware');\n\n;(function(root){\n    var DriverFactory = function(platform){\n        this.platform = platform;\n    };\n\n    DriverFactory.prototype = {\n        buildNetworkDriver: function(){\n            var networkDriver = new NetworkDriver();\n\n            switch(this.platform){\n                case Platform.PLATFORM_TIZEN:\n                    networkDriver = new NetworkDriverTizen();\n                    break;\n                case Platform.PLATFORM_ANDROID:\n                    networkDriver = new NetworkDriverAndroid();\n                    break;\n            }\n\n            return networkDriver;\n        },\n        buildBatteryDriver: function(){\n            var batteryDriver = new BatteryDriver();\n\n            switch(this.platform){\n                case Platform.PLATFORM_TIZEN:\n                    batteryDriver = new BatteryDriverTizen();\n                    break;\n                case Platform.PLATFORM_ANDROID:\n                    batteryDriver = new BatteryDriverAndroid();\n                    break;\n            }\n\n            return batteryDriver;\n        },\n        buildHardwareDriver: function(){\n            var hardwareDriver = new HardwareDriver();\n\n            switch(this.platform){\n                case Platform.PLATFORM_TIZEN:\n                    hardwareDriver = new HardwareDriverTizen();\n                    break;\n                case Platform.PLATFORM_ANDROID:\n                    hardwareDriver = new HardwareDriverAndroid();\n                    break;\n            }\n\n            return hardwareDriver;\n        }\n    };\n\n    root.DriverFactory = DriverFactory;\n})(window);\n",";(function(root){\n    var BatteryDriver = function(){\n        this.level = null;\n        this.commonEvents = window.app.common.events;\n    };\n\n    BatteryDriver.prototype = {\n        init: function(){\n            this.bind();\n        },\n        bind: function(){\n\n        }\n    };\n\n    root.BatteryDriver = BatteryDriver;\n})(window);\n",";(function(root){\n    var HardwareDriver = function(){\n        this.commonEvents = window.app.common.events;\n    };\n\n    HardwareDriver.prototype = {\n        init: function(){\n            this.bind();\n        },\n        bind: function(){\n\n        },\n        /**\n         *\n         * @returns {boolean}\n         */\n        isHeartRateAvailable: function () {\n            return false;\n        },\n        backgroundRunEnable: function () {\n\n        },\n        backgroundRunDisable: function () {\n\n        },\n        exit: function () {\n\n        }\n    };\n\n    root.HardwareDriver = HardwareDriver;\n})(window);\n",";(function(root){\n    var NetworkDriver = function(){\n        this.commonEvents = window.app.common.events;\n        this.networkType = 'NONE';\n    };\n\n    var NETWORKS = ['2G', '2.5G', '3G', '4G', 'WIFI', 'ETHERNET', 'UNKNOWN'];\n\n    NetworkDriver.prototype = {\n        init: function(){\n            this.bind();\n        },\n        bind: function(){\n\n        },\n        isNetworkAvailable: function () {\n            return NETWORKS.indexOf(this.networkType) !== -1;\n        },\n        getNetworkType: function () {\n            return this.networkType;\n        }\n    };\n\n    root.NetworkDriver = NetworkDriver;\n})(window);\n",";(function(root){\n    var Platform = {\n        PLATFORM_TIZEN: 'tizen',\n        PLATFORM_ANDROID: 'android',\n        PLATFORM_BROWSER: 'browser',\n\n        get: function(){\n            var platform = this.PLATFORM_BROWSER;\n\n            if( typeof tizen === 'object' && typeof tizen.systeminfo === 'object'){\n                platform = this.PLATFORM_TIZEN;\n            }\n            else if(typeof device === 'object' && device.platform === 'Android'){\n                platform = this.PLATFORM_ANDROID;\n            }\n\n            return platform;\n        }\n    };\n\n    root.Platform = Platform;\n})(window);\n","require('../app.drivers.battery')\n\n;(function(root){\n    var BatteryDriverTizen = function(){\n\n    };\n\n    var proto = new BatteryDriver();\n\n    proto.bind = function(){\n        var _this = this,\n            systeminfo = null;\n\n        if (typeof tizen === 'object' && typeof tizen.systeminfo === 'object') {\n            var systeminfo = tizen.systeminfo;\n        } else {\n            console.warn('tizen.systeminfo not available');\n        }\n        try {\n            systeminfo.addPropertyValueChangeListener(\n                'BATTERY',\n                function change(battery) {\n                    _this.level = battery.level;\n\n                    if (!battery.isCharging && battery.level < _this.LOW_BATTERY) {\n                        _this.commonEvents.dispatchEvent('model.battery.low');\n                    }\n                },\n                null,\n                function errorCallback(error) {\n                    console.warn('Battery state listener was not set.', error);\n                }\n            );\n        } catch (error) {\n            console.warn('Battery state listener was not set.', error);\n        }\n    }\n\n    BatteryDriverTizen.prototype = proto;\n    root.BatteryDriverTizen = BatteryDriverTizen;\n})(window);\n","require('../app.drivers.hardware')\n\n;(function(root){\n    var HardwareDriverTizen = function(){\n        this.commonEvents = window.app.common.events;\n    };\n\n    var proto = new HardwareDriver();\n\n        proto.bind = function(){\n\n        };\n        proto.isHeartRateAvailable = function () {\n            return true;\n        };\n        proto.backgroundRunEnable = function () {\n            tizen.power.request(\"CPU\", \"CPU_AWAKE\");\n            tizen.power.request('SCREEN', 'SCREEN_NORMAL');\n        };\n        proto.backgroundRunDisable = function () {\n            tizen.power.release(\"CPU\");\n            tizen.power.release('SCREEN');\n        };\n        proto.exit = function(){\n            try {\n                tizen.application.getCurrentApplication().exit();\n            } catch (error) {\n                console.warn('Application exit failed.', error.message);\n            }\n        };\n\n    HardwareDriverTizen.prototype = proto;\n    root.HardwareDriverTizen = HardwareDriverTizen;\n})(window);\n","require('../app.drivers.network')\n\n;(function(root){\n    var NetworkDriverTizen = function(){\n\n    };\n\n    var proto = new NetworkDriver();\n\n    proto.bind = function(){\n        var _this = this,\n            systeminfo = null;\n\n        if (typeof tizen === 'object' && typeof tizen.systeminfo === 'object') {\n            var systeminfo = tizen.systeminfo;\n        } else {\n            console.warn('tizen.systeminfo not available');\n        }\n\n        try {\n            systeminfo.getPropertyValue(\n                'NETWORK',\n                function(network){\n                    _this.onGetNetworkTypeSuccess(network);\n                },\n                function onGetPropertyValueError(error) {\n                    console.warn('Couldn\\'t get network type value.', error);\n                }\n            );\n        } catch (error) {\n            console.warn('Couldn\\'t get network type value.', error);\n        }\n\n        try {\n            systeminfo.addPropertyValueChangeListener(\n                'NETWORK',\n            function(network){\n                _this.onNetworkTypeChange(network);\n            }\n        );\n        } catch (error) {\n            console.warn('Network change listener was not set.', error);\n        }\n\n    };\n\n    proto.onNetworkTypeChange = function(network) {\n        this.networkType = network.networkType;\n        this.commonEvents.dispatchEvent('model.network.type.changed');\n    };\n\n    proto.onGetNetworkTypeSuccess = function(network) {\n        this.networkType = network.networkType;\n        this.commonEvents.dispatchEvent('model.network.initialized');\n    };\n\n    NetworkDriverTizen.prototype = proto;\n    root.NetworkDriverTizen = NetworkDriverTizen;\n})(window);\n","require('../common/app.common.events');\n\nrequire('./drivers/app.drivers.platform');\nrequire('./drivers/app.driver.factory');\n\nrequire('./app.model.battery');\nrequire('./app.model.network');\nrequire('./app.model.geolocation');\nrequire('./app.model.workout');\nrequire('./app.model.sync');","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, tau, document*/\n\n/**\n * Application info popup module.\n * It is responsible showing info popup.\n *\n * @module app.ui.info\n * @memberof app.ui\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppUiLogin(app) {\n    'use strict';\n\n    /**\n     * Page Id.\n     *\n     * @private\n     * @const {string}\n     */\n    var PAGE_ID = 'info-popup',\n\n        /**\n         * Page element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        page = null,\n\n        /**\n         * UI navigation module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiInfo = null,\n\n        /**\n         * Popup shown when the workout is paused\n         *\n         * @type {HTMLElement}\n         */\n        infoPopup = null,\n        infoPopupContent = null;\n\n    // create namespace for the module\n    app.ui = app.ui || {};\n    app.ui.info = app.ui.info || {};\n    uiInfo = app.ui.info;\n\n\n    /**\n     * Updates UI.\n     *\n     * @private\n     */\n    function updateUI(data) {\n    }\n\n    /**\n     * Handles pagebeforeshow event.\n     *\n     * @private\n     */\n    function onPageBeforeShow() {\n    }\n\n    /**\n     * Handles model.workout.updateui event.\n     *\n     * Updates workout page ui\n     * according to the values provided by the workout model module.\n     *\n     * @private\n     */\n    function onInfoShowHandler(e) {\n        infoPopupContent.innerHTML = e.detail;\n        tau.openPopup(infoPopup);\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        page.addEventListener('pagebeforeshow', onPageBeforeShow);\n        window.addEventListener('ui.info.show', onInfoShowHandler);\n\n    }\n\n    /**\n     * Shows the navigation page.\n     *\n     * @memberof app.ui.navigation\n     * @public\n     */\n    uiInfo.show = function show() {\n        tau.changePage('#' + PAGE_ID);\n    };\n\n    /**\n     * Initializes the ui navigation module.\n     *\n     * @memberof app.ui.navigation\n     * @public\n     */\n    uiInfo.init = function init() {\n        page = document.getElementById(PAGE_ID);\n        infoPopup = document.getElementById('info-popup');\n        infoPopupContent = document.getElementById('info-content');\n\n        bindEvents();\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, tau, setTimeout, document*/\n\n/**\n * Application waiting page module.\n * It is responsible for waiting page layout and logic.\n *\n * @module app.ui.waiting\n * @requires {@link app.ui.destination}\n * @namespace app.ui.waiting\n * @memberof app.ui\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppUiIntro(app) {\n    'use strict';\n\n    /**\n     * Page Id.\n     *\n     * @private\n     * @const {string}\n     */\n    var PAGE_ID = 'intro',\n\n        /**\n         * Lost connection message string.\n         *\n         * @private\n         * @const {string}\n         */\n        LOST_CONNECTION_MESSAGE = 'LOST\\nCONNECTION',\n\n        /**\n         * Waiting for GPS data message string.\n         *\n         * @private\n         * @const {string}\n         */\n        WAITING_FOR_GPS_DATA_MESSAGE = 'WAITING FOR\\nGPS DATA',\n\n        /**\n         * Lost CSS class.\n         *\n         * @private\n         * @const {string}\n         */\n        LOST_CLASS = 'lost',\n\n        /**\n         * Lost connection timeout.\n         *\n         * @private\n         * @const {number}\n         */\n        LOST_CONNECTION_TIMEOUT = 3000,\n\n        /**\n         * UiWaiting module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiIntro = null,\n\n        /**\n         * UI destination module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiMain = null,\n\n        /**\n         * Page element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        page = null,\n\n        /**\n         * Waiting message element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        waitingMessage = null,\n\n        /**\n         * Stores information about the reason of displaying the waiting page.\n         *\n         * @type {boolean}\n         */\n        isConnectionLost = false;\n\n    // create namespace for the module\n    app.ui = app.ui || {};\n    app.ui.intro = app.ui.intro || {};\n    uiIntro = app.ui.intro;\n\n    /**\n     * Handles model.geolocation.position.available event.\n     *\n     * @private\n     */\n    function onModelGeolocationPositionAvailable() {\n        if (tau.activePage.id === PAGE_ID) {\n            if (isConnectionLost) {\n                tau.back();\n            } else {\n                uiMain.show();\n            }\n        }\n    }\n\n    /**\n     * Sets waiting for GPS data message.\n     *\n     * @private\n     */\n    function setWaitingMessage() {\n        waitingMessage.classList.remove(LOST_CLASS);\n        waitingMessage.innerText = WAITING_FOR_GPS_DATA_MESSAGE;\n    }\n\n    /**\n     * Sets lost connection message.\n     *\n     * @private\n     */\n    function setLostMessage() {\n        waitingMessage.classList.add(LOST_CLASS);\n        waitingMessage.innerText = LOST_CONNECTION_MESSAGE;\n    }\n\n    /**\n     * Handles pagebeforeshow event.\n     *\n     * @private\n     */\n    function onPageBeforeShow() {\n        setLostMessage();\n        setTimeout(function onTimeout() {\n            setWaitingMessage();\n        }, LOST_CONNECTION_TIMEOUT);\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        page.addEventListener('pagebeforeshow', onPageBeforeShow);\n        window.addEventListener(\n            'model.geolocation.position.available',\n            onModelGeolocationPositionAvailable\n        );\n    }\n\n    /**\n     * Shows the waiting page.\n     *\n     * @memberof app.ui.waiting\n     * @public\n     */\n    uiIntro.show = function show() {\n        isConnectionLost = true;\n        tau.changePage('#' + PAGE_ID);\n    };\n\n    /**\n     * Initializes the ui waiting module.\n     *\n     * @memberof app.ui.waiting\n     * @public\n     */\n    uiIntro.init = function init() {\n        uiMain = app.ui.main;\n        uiIntro = app.ui.intro;\n        page = document.getElementById(PAGE_ID);\n        waitingMessage = page.querySelector('#waiting-message');\n        setWaitingMessage();\n        bindEvents();\n    };\n\n})(window.app);\n","require('./app.ui.workout');\nrequire('./app.ui.login');\nrequire('./app.ui.main');\nrequire('./app.ui.intro');\nrequire('./app.ui.info');\n\n/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, document, tau*/\n\n/**\n * Application ui module.\n * It is responsible for the application ui initialization.\n *\n * @module app.ui\n * @requires {@link app.model.geolocation}\n * @requires {@link app.model.network}\n * @requires {@link app.ui.waiting}\n * @requires {@link app.ui.destination}\n * @requires {@link app.ui.navigation}\n * @requires {@link app.ui.finish}\n * @namespace app.ui\n * @memberof app\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppUi(app) {\n    'use strict';\n\n    /**\n     * Google maps API key.\n     *\n     * @private\n     * @const {string}\n     */\n    var API_KEY = '',\n\n        /**\n         * UI module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        ui = null,\n\n        /**\n         * Geolocation model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelGeolocation = null,\n\n        /**\n         * Network model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelNetwork = null,\n\n        /**\n         * Compass model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelWorkout = null,\n\n        /**\n         * Compass model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelSync = null,\n\n        /**\n         * UI waiting module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiIntro = null,\n\n        /**\n         * UI destination module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiMain = null,\n\n        /**\n         * UI navigation module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiWorkout = null,\n\n        /**\n         * UI login reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiLogin = null,\n\n        /**\n         * UI info reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiInfo = null,\n\n        /**\n         * Close popup element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        closePopup = null,\n\n        /**\n         * Close popup yes button element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        closePopupYesBtn = null,\n\n        /**\n         * Gps status indicator.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        gpsStatusIndicators = null,\n\n        /**\n         * Network status indicator.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        networkStatusIndicators = null,\n\n        commonEvents = null;\n\n    // create namespace for the module\n    app.ui = app.ui || {};\n    ui = app.ui;\n\n    /**\n     * Handles model.network.initialized event.\n     *\n     * @private\n     */\n    function onModelNetworkInitialized() {\n        onModelNetworkTypeChanged();\n    }\n\n    /**\n     * Handles model.network.type.changed event.\n     *\n     * @private\n     */\n    function onModelNetworkTypeChanged() {\n        for (var i = 0; i < networkStatusIndicators.length; ++i) {\n            var networkStatusIndicator = networkStatusIndicators[i];\n\n            if (networkStatusIndicator.classList.contains('network-status-active')) {\n                networkStatusIndicator.classList.remove('network-status-active');\n            }\n\n            if (modelNetwork.isNetworkAvailable() &&\n                !networkStatusIndicator.classList.contains('network-status-active')) {\n                    networkStatusIndicator.classList.add('network-status-active');\n            }\n        };\n    }\n\n    /**\n     * Handles model.geolocation.position.available event.\n     *\n     * @private\n     */\n    function onModelGeolocationPositionAvailable() {\n        for (var i = 0; i < gpsStatusIndicators.length; ++i) {\n            var gpsStatusIndicator = gpsStatusIndicators[i];\n            if (!gpsStatusIndicator.classList.contains('gps-status-active')) {\n                gpsStatusIndicator.classList.add('gps-status-active');\n            }\n        };\n    }\n\n    /**\n     * Handles model.geolocation.position.unavailable\n     * and model.geolocation.position.lost events.\n     *\n     * @private\n     */\n    function onModelGeolocationPositionUnAvailable() {\n        for (var i = 0; i < gpsStatusIndicators.length; ++i) {\n            var gpsStatusIndicator = gpsStatusIndicators[i];\n            if (gpsStatusIndicator.classList.contains('gps-status-active')) {\n                gpsStatusIndicator.classList.remove('gps-status-active');\n            }\n        }\n    }\n\n    /**\n     * Handles click event on close popup yes button click.\n     *\n     * @private\n     */\n    function onClosePopupYesBtnClick() {\n        app.exit();\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        closePopupYesBtn.addEventListener('click', onClosePopupYesBtnClick);\n        window.addEventListener(\n            'model.network.initialized',\n            onModelNetworkInitialized\n        );\n        window.addEventListener(\n            'model.network.type.changed',\n            onModelNetworkTypeChanged\n        );\n\n        window.addEventListener(\n            'model.geolocation.position.available',\n            onModelGeolocationPositionAvailable\n        );\n\n        window.addEventListener(\n            'model.geolocation.position.unavailable',\n            onModelGeolocationPositionUnAvailable\n        );\n\n        window.addEventListener(\n            'model.geolocation.position.lost',\n            onModelGeolocationPositionUnAvailable\n        );\n    }\n\n    /**\n     * Toggles close popup.\n     *\n     * @memberof app.ui\n     * @public\n     */\n    ui.toggleClosePopup = function toggleClosePopup() {\n        if (closePopup.classList.contains('ui-popup-active')) {\n            tau.closePopup(closePopup);\n        } else {\n            tau.openPopup(closePopup);\n        }\n    };\n\n    /**\n     * Initializes the ui module.\n     *\n     * @memberof app.ui\n     * @public\n     */\n    ui.init = function init() {\n        modelGeolocation = app.model.geolocation;\n        modelNetwork = app.model.network;\n        modelWorkout = app.model.workout;\n        modelSync = app.model.sync;\n        uiIntro = app.ui.intro;\n        uiMain = app.ui.main;\n        uiWorkout = app.ui.workout;\n        uiLogin = app.ui.login;\n        uiInfo = app.ui.info;\n        commonEvents = app.common.events;\n        closePopup = document.getElementById('close-popup');\n        closePopupYesBtn = closePopup.querySelector('#close-popup-yes-btn');\n        gpsStatusIndicators = document.querySelectorAll('.gps-status');\n        networkStatusIndicators = document.querySelectorAll('.network-status');\n        bindEvents();\n        uiInfo.init();\n        uiIntro.init();\n        uiMain.init();\n        uiWorkout.init();\n        uiLogin.init();\n        modelGeolocation.init();\n        modelSync.init(\n            'https://tracy.wernerd.info/api/login',\n            'https://tracy.wernerd.info/api/workouts'\n        );\n\n        window.addEventListener(\n            'model.workout.dbready',\n            function(e){\n                modelSync.sync();\n            });\n\n        window.addEventListener(\n            'model.workout.save.successful',\n            function(e){\n                modelSync.sync();\n            });\n\n        window.addEventListener(\n            'model.sync.upload.successful',\n            function(e){\n                commonEvents.dispatchEvent( 'ui.info.show', 'Workouts synced successfully!');\n            });\n\n        window.addEventListener(\n            'model.sync.upload.failed',\n            function(e){\n                commonEvents.dispatchEvent( 'ui.info.show', 'Workout sync failed!');\n            });\n\n\n\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, tau, document*/\n\n/**\n * Application navigation page module.\n * It is responsible for navigation page layout and logic.\n *\n * @module app.ui.navigation\n * @requires {@link app.common.calculations}\n * @requires {@link app.model.geolocation}\n * @requires {@link app.ui.waiting}\n * @requires {@link app.ui.destination}\n * @requires {@link app.ui.finish}\n * @namespace app.ui.navigation\n * @memberof app.ui\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppUiLogin(app) {\n    'use strict';\n\n    /**\n     * Page Id.\n     *\n     * @private\n     * @const {string}\n     */\n    var PAGE_ID = 'login-popup',\n\n        /**\n         * Page element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        page = null,\n\n        /**\n         * Sync model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelSync = null,\n\n        /**\n         * UI navigation module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiLogin = null,\n\n        /**\n         * Common events module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonEvents = app.common.events,\n\n        /**\n         * Popup shown when the workout is paused\n         *\n         * @type {HTMLElement}\n         */\n        loginPopup = null,\n        loginPopupLoginButton = null,\n        loginPopupCancelButton = null;\n\n    // create namespace for the module\n    app.ui = app.ui || {};\n    app.ui.login = app.ui.login || {};\n    uiLogin = app.ui.login;\n\n\n    /**\n     * Updates UI.\n     *\n     * @private\n     */\n    function updateUI(data) {\n    }\n\n    /**\n     * Handles pagebeforeshow event.\n     *\n     * @private\n     */\n    function onPageBeforeShow() {\n    }\n\n    /**\n     * Handles model.workout.updateui event.\n     *\n     * Updates workout page ui\n     * according to the values provided by the workout model module.\n     *\n     * @private\n     */\n    function onModelWorkoutUpdateUI(e) {\n        if (tau.activePage.id === PAGE_ID) {\n            updateUI(e.detail);\n        }\n    }\n\n    /**\n     * Handles click event on pause popup finish button click.\n     *\n     * @private\n     */\n    function onLoginPopupLoginBtnClick() {\n        var email = loginPopup.querySelector('#login-email').value,\n            password = loginPopup.querySelector('#login-password').value;\n\n\n        modelSync.login(email, password)\n    }\n\n    /**\n     * Handles click event on pause popup resume button click.\n     *\n     * @private\n     */\n    function onLoginPopupCancelBtnClick() {\n    }\n\n    function onLoginSuccessful() {\n        commonEvents.dispatchEvent( 'ui.info.show', 'Successful login!');\n    }\n\n    function onLoginFail() {\n        commonEvents.dispatchEvent( 'ui.info.show', 'Login failed!');\n    }\n\n    function onLoginRequired(){\n        tau.openPopup(loginPopup);\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        page.addEventListener('pagebeforeshow', onPageBeforeShow);\n\n\n        loginPopupLoginButton.addEventListener('click', onLoginPopupLoginBtnClick);\n        loginPopupCancelButton.addEventListener('click', onLoginPopupCancelBtnClick);\n\n        window.addEventListener( 'model.sync.login.successful', onLoginSuccessful );\n        window.addEventListener( 'model.sync.login.failed', onLoginFail );\n        window.addEventListener( 'model.sync.login.required', onLoginRequired );\n\n    }\n\n    /**\n     * Shows the navigation page.\n     *\n     * @memberof app.ui.navigation\n     * @public\n     */\n    uiLogin.show = function show() {\n        tau.changePage('#' + PAGE_ID);\n    };\n\n    /**\n     * Initializes the ui navigation module.\n     *\n     * @memberof app.ui.navigation\n     * @public\n     */\n    uiLogin.init = function init() {\n        modelSync = app.model.sync;\n        page = document.getElementById(PAGE_ID);\n        loginPopup = document.getElementById('login-popup');\n        loginPopupLoginButton = loginPopup.querySelector('#login-popup-login-btn');\n        loginPopupCancelButton = loginPopup.querySelector('#login-popup-cancel-btn');\n\n        //tau.openPopup(loginPopup);\n\n        bindEvents();\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, tau, google, document*/\n\n/**\n * Application destination page module.\n * It is responsible for destination page layout and logic.\n *\n * @module app.ui.destinaton\n * @requires {@link app.model.geolocation}\n * @requires {@link app.model.network}\n * @requires {@link app.ui.navigation}\n * @requires {@link app.ui.waiting}\n * @namespace app.ui.destinaton\n * @memberof app.ui\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppUiMain(app) {\n    'use strict';\n\n    /**\n     * Page Id.\n     *\n     * @private\n     * @const {string}\n     */\n    var PAGE_ID = 'main',\n\n         /**\n         * Page element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        page = null,\n\n        /**\n         * Geolocation model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelGeolocation = null,\n\n        /**\n         * Network model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelNetwork = null,\n\n        modelWorkout = null,\n\n         /**\n         * Ui waiting module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiWaiting = null,\n\n        /**\n         * UI destination module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiMain = null,\n\n        workoutStartCyclingButton = null,\n        workoutStartRunningButton = null;\n\n\n    // create namespace for the module\n    app.ui = app.ui || {};\n    app.ui.main = app.ui.main || {};\n    uiMain = app.ui.main;\n\n\n\n    /**\n     * Handles pagebeforeshow event.\n     *\n     * @private\n     */\n    function onPageBeforeShow() {\n\n    }\n\n    function onWorkoutStartCycling() {\n        modelWorkout.start(modelWorkout.WORKOUT_TYPE_CYCLING);\n        tau.changePage('#workout');\n    }\n\n    function onWorkoutStartRunning() {\n        modelWorkout.start(modelWorkout.WORKOUT_TYPE_RUNNING);\n        tau.changePage('#workout');\n    }\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        page.addEventListener('pagebeforeshow', onPageBeforeShow);\n\n        workoutStartCyclingButton.addEventListener('click', onWorkoutStartCycling);\n        workoutStartRunningButton.addEventListener('click', onWorkoutStartRunning);\n    }\n\n    /**\n     * Shows the destination page.\n     *\n     * @memberof app.ui.destination\n     * @public\n     * @param {object} data\n     */\n    uiMain.show = function show(data) {\n        tau.changePage('#' + PAGE_ID);\n    };\n\n    /**\n     * Initializes the ui destination module.\n     *\n     * @memberof app.ui.destination\n     * @public\n     */\n    uiMain.init = function init() {\n        modelGeolocation = app.model.geolocation;\n        modelNetwork = app.model.network;\n        modelWorkout = app.model.workout;\n        uiWaiting = app.ui.waiting;\n        page = document.getElementById(PAGE_ID);\n        workoutStartCyclingButton = page.querySelector('.workout-start-cycling');\n        workoutStartRunningButton = page.querySelector('.workout-start-running');\n        bindEvents();\n    };\n\n})(window.app);\n","/*\n * Copyright (c) 2015 Samsung Electronics Co., Ltd. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*global window, tau, document*/\n\n/**\n * Application navigation page module.\n * It is responsible for navigation page layout and logic.\n *\n * @module app.ui.navigation\n * @requires {@link app.common.calculations}\n * @requires {@link app.model.geolocation}\n * @requires {@link app.ui.waiting}\n * @requires {@link app.ui.destination}\n * @requires {@link app.ui.finish}\n * @namespace app.ui.navigation\n * @memberof app.ui\n */\n\n// make sure that \"app\" namespace is created\nwindow.app = window.app || {};\n\n(function defineAppUiWorkout(app) {\n    'use strict';\n\n    /**\n     * Page Id.\n     *\n     * @private\n     * @const {string}\n     */\n    var PAGE_ID = 'workout',\n\n        /**\n         * Navigation path angle.\n         *\n         * @private\n         * @const {number}\n         */\n        PATH_ANGLE = 60,\n\n        /**\n         * Page element.\n         *\n         * @private\n         * @type {HTMLElement}\n         */\n        page = null,\n\n        /**\n         * Common calculations module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        commonCalculations = null,\n\n        /**\n         * Geolocation model module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        modelWorkout = null,\n\n        /**\n         * Ui waiting module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiWaiting = null,\n\n        /**\n         * UI destination module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiDestination = null,\n\n        /**\n         * UI finish module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiFinish = null,\n\n        /**\n         * UI navigation module reference.\n         *\n         * @private\n         * @type {object}\n         */\n        uiWorkout = null,\n\n        /**\n         * Total distance.\n         *\n         * @private\n         * @type {number}\n         */\n        totalDistance = 0,\n\n        /**\n         * HTML elements to update during workout\n         *\n         * @type {HTMLElement}\n         */\n        workoutStatus = null,\n        workoutSpeed = null,\n        workoutSpeedLabel = null,\n        workoutSpeedUnit = null,\n        workoutDistance = null,\n        workoutHr = null,\n        workoutAltitude = null,\n\n        workoutPauseButton = null,\n\n        /**\n         *\n         * @type {BaseWorkout}\n         */\n        workout = null,\n\n        /**\n         * Popup shown when the workout is paused\n         *\n         * @type {HTMLElement}\n         */\n        pausePopup = null,\n        pausePopupFinishButton = null,\n        pausePopupResumeButton = null,\n\n        /**\n         * Popup shown when the workout is finished\n         *\n         * @type {HTMLElement}\n         */\n        savePopup = null,\n        savePopupDiscardButton = null,\n        savePopupSaveButton = null,\n        commonEvents = null;\n\n    // create namespace for the module\n    app.ui = app.ui || {};\n    app.ui.workout = app.ui.workout || {};\n    uiWorkout = app.ui.workout;\n\n\n    /**\n     * Updates UI.\n     *\n     * @private\n     */\n    function updateUI(data) {\n        workoutSpeed.innerText = Math.round( data.speed * 10 ) / 10;\n        workoutSpeedLabel.innerText = data.speedLabel;\n        workoutSpeedUnit.innerText = data.speedUnit;\n        workoutDistance.innerText = Math.round( data.distance * 10 ) / 10;\n        workoutHr.innerText = Math.round(data.heartRate);\n        workoutAltitude.innerText = Math.round(data.altitude);\n    }\n\n    /**\n     * Handles pagebeforeshow event.\n     *\n     * @private\n     */\n    function onPageBeforeShow() {\n        if(workout){\n            updateUI(workout);\n        }\n\n        if(!modelWorkout.isHeartRateAvailable()){\n            workoutHr.style.display = 'none';\n        }\n        workoutStatus.style.display = 'none';\n    }\n\n    /**\n     * Handles model.workout.uidateui event.\n     *\n     * Updates workout page ui\n     * according to the values provided by the workout model module.\n     *\n     * @private\n     */\n    function onModelWorkoutUpdateUI(e) {\n        workout = e.detail;\n\n        if (tau.activePage.id === PAGE_ID) {\n            updateUI(workout);\n        }\n    }\n\n    /**\n     * Handles tizenhwkey event.\n     *\n     * Closes application if the back device button is pressed.\n     *\n     * @private\n     * @param {Event} e\n     */\n    function onHwKeyEvent(e) {\n        if (tau.activePage.id === PAGE_ID) {\n\t        if (e.keyName === 'back') {\n\t            modelWorkout.togglePause();\n\t            e.stopPropagation();\n\t        }\n        }\n    }\n\n    /**\n     * Handles model.workout.paused event.\n     *\n     *\n     * @private\n     */\n    function onModelWorkoutPaused(e) {\n        if (tau.activePage.id === PAGE_ID) {\n            workoutStatus.style.display = 'inline';\n            tau.openPopup(pausePopup);\n        }\n    }\n\n    /**\n     * Handles model.workout.resumed event.\n     *\n     *\n     * @private\n     */\n    function onModelWorkoutResumed(e) {\n        if (tau.activePage.id === PAGE_ID) {\n            workoutStatus.style.display = 'none';\n            tau.closePopup(pausePopup);\n        }\n    }\n\n    /**\n     * Handles click event on pause popup finish button click.\n     *\n     * @private\n     */\n    function onPausePopupFinishBtnClick() {\n        tau.openPopup(savePopup);\n    }\n\n    /**\n     * Handles click event on pause button button click.\n     *\n     * @private\n     */\n    function onPauseBtnClick(e) {\n        modelWorkout.togglePause();\n    }\n\n    /**\n     * Handles click event on pause popup resume button click.\n     *\n     * @private\n     */\n    function onPausePopupResumeBtnClick() {\n        modelWorkout.togglePause();\n    }\n\n    /**\n     * Handles click event on save popup save button click.\n     *\n     * @private\n     */\n    function onSavePopupSaveBtnClick() {\n        modelWorkout.save();\n        tau.changePage('#main');\n    }\n\n    /**\n     * Handles click event on save popup discard button click.\n     *\n     * @private\n     */\n    function onSavePopupDiscardBtnClick() {\n        tau.changePage('#main');\n    }\n\n    function onModelWorkoutSaveSuccess() {\n        commonEvents.dispatchEvent( 'ui.info.show', 'Workout saved sucessfully!');\n    }\n\n    function onModelWorkoutSaveFailed() {\n        commonEvents.dispatchEvent( 'ui.info.show', 'Workout saved failed!');\n    }\n\n    /**\n     * Registers event listeners.\n     *\n     * @private\n     */\n    function bindEvents() {\n        page.addEventListener('pagebeforeshow', onPageBeforeShow);\n        document.addEventListener('tizenhwkey', onHwKeyEvent);\n        window.addEventListener(\n            'model.workout.updateui',\n            onModelWorkoutUpdateUI\n        );\n\n        window.addEventListener(\n            'model.workout.paused',\n            onModelWorkoutPaused\n        );\n\n        window.addEventListener(\n            'model.workout.resumed',\n            onModelWorkoutResumed\n        );\n\n        window.addEventListener(\n            'model.workout.save.successful',\n            onModelWorkoutSaveSuccess\n        );\n\n        window.addEventListener(\n            'model.workout.save.failed',\n            onModelWorkoutSaveFailed\n        );\n\n        workoutPauseButton.addEventListener('click', onPauseBtnClick);\n\n        pausePopupFinishButton.addEventListener('click', onPausePopupFinishBtnClick);\n        pausePopupResumeButton.addEventListener('click', onPausePopupResumeBtnClick);\n\n        savePopupSaveButton.addEventListener('click', onSavePopupSaveBtnClick);\n        savePopupDiscardButton.addEventListener('click', onSavePopupDiscardBtnClick);\n\n    }\n\n    /**\n     * Shows the navigation page.\n     *\n     * @memberof app.ui.navigation\n     * @public\n     */\n    uiWorkout.show = function show() {\n        tau.changePage('#' + PAGE_ID);\n    };\n\n    /**\n     * Initializes the ui navigation module.\n     *\n     * @memberof app.ui.navigation\n     * @public\n     */\n    uiWorkout.init = function init() {\n        commonCalculations = app.common.calculations;\n        commonEvents = app.common.events;\n        modelWorkout = app.model.workout;\n        page = document.getElementById(PAGE_ID);\n        workoutStatus = page.querySelector('.workout-status');\n        workoutSpeed = page.querySelector('.workout-speed');\n        workoutSpeedLabel = page.querySelector('.workout-speed-label');\n        workoutSpeedUnit = page.querySelector('.workout-speed-unit');\n        workoutDistance = page.querySelector('.workout-distance');\n        workoutHr = page.querySelector('.workout-hr');\n        workoutAltitude = page.querySelector('.workout-altitude');\n        workoutPauseButton = page.querySelector('#workout-pause-btn');\n        pausePopup = document.getElementById('pause-popup');\n        pausePopupFinishButton = pausePopup.querySelector('#pause-popup-yes-btn');\n        pausePopupResumeButton = pausePopup.querySelector('#pause-popup-no-btn');\n        savePopup = document.getElementById('save-popup');\n        savePopupSaveButton = savePopup.querySelector('#save-popup-yes-btn');\n        savePopupDiscardButton = savePopup.querySelector('#save-popup-no-btn');\n\n        bindEvents();\n    };\n\n})(window.app);\n","require('./app.workout.point');\nrequire('../common/app.common.calculations');\n\nvar WORKOUT_STATUS_UNSAVED = 0,\n    WORKOUT_STATUS_SAVED = 1,\n\n    WORKOUT_STATE_STOPPED = 0,\n    WORKOUT_STATE_RUNNING = 1,\n    WORKOUT_STATE_PAUSED = 2,\n    WORKOUT_STATE_AUTOPAUSED = 3;\n\nexport const WORKOUT_TYPE_RUNNING = 1;\nexport const WORKOUT_TYPE_CYCLING = 2;\n\n/**\n * @class BaseWorkout\n * @constructor\n */\nclass BaseWorkout {\n\n    constructor() {\n        this.type = null;\n        this.status = WORKOUT_STATUS_UNSAVED;\n\n        /** @member {Point[]} **/\n        this._points = [];\n        this._distance = 0;\n\n        this._segmentIndex = 0;\n        this._state = WORKOUT_STATE_STOPPED;\n    }\n\n    init() {\n    }\n\n    start() {\n        this._state = WORKOUT_STATE_RUNNING;\n    }\n\n    pause() {\n        this._state = WORKOUT_STATE_PAUSED;\n        this._segmentIndex++;\n    }\n\n    save() {\n        this.status = WORKOUT_STATUS_SAVED;\n    }\n\n    resume() {\n        this._state = WORKOUT_STATE_RUNNING;\n    }\n\n    /**\n     *\n     * @returns {boolean}\n     */\n    isActive() {\n        return this._state === WORKOUT_STATE_RUNNING;\n    }\n\n    /**\n     *\n     * @param {Point} point\n     */\n    addPoint(point) {\n        point.segment_index = this._segmentIndex;\n\n        this._points.push(point);\n\n        let points = this._getCalculationPoints();\n\n        if(points){\n            this.calculate(points.pointA, points.pointB);\n        }\n\n    }\n\n    /**\n     *\n     * @private\n     *\n     * @returns {?{pointA: Point, pointB: Point}}\n     */\n    _getCalculationPoints(){\n        let calculationPoints = null;\n\n        if(this._points.length >= 2){\n            calculationPoints =  {\n                pointA: this._points[this._points.length - 2],\n                pointB: this._points[this._points.length - 1]\n            }\n        }\n\n        return calculationPoints;\n\n    }\n\n    /**\n     *\n     * @param {Point} pointA\n     * @param {Point} pointB\n     * @returns {number}\n     */\n    _calculateDistance(pointA, pointB) {\n        let distance = window.app.common.calculations.calculateDistance(\n            {latitude: pointA.lat, longitude: pointA.lng},\n            {latitude: pointB.lat, longitude: pointB.lng}\n        );\n\n        this._distance += distance.raw;\n\n        return distance.raw;\n    }\n\n    /**\n     * Calculate the params such as distance, speed, etc\n     *\n     * @param {Point} pointA\n     * @param {Point} pointB\n     */\n    calculate(pointA, pointB){\n\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get speedUnit(){\n        return 'km/h';\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get speedLabel(){\n        return 'Speed'\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    get speed(){\n        return 0;\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    get distance(){\n        return this._distance / 1000;\n    }\n\n    /**\n     *\n     * @param {number} distance\n     */\n    set distance(distance){\n        this._distance = distance;\n    }\n\n    /**\n     *\n     * @returns {Point[]}\n     */\n    get points(){\n        return this._points;\n    }\n\n    /**\n     *\n     * @returns {int|number}\n     */\n    get heartRate(){\n        return this._points.length ? this._points[this._points.length - 1].heart_rate : 0;\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    get altitude(){\n        return this._points.length ? this._points[this._points.length - 1].elevation : 0;\n    }\n\n    /**\n     *\n     * @returns {{type: int, status: int, points: Point[]}}\n     */\n    toObject() {\n        return {\n            type: this.type,\n            status: this.status,\n            points: this._points\n        }\n    }\n};\n\nexport {BaseWorkout};\n","import {BaseWorkout, WORKOUT_TYPE_CYCLING} from \"./app.workout.base_workout\";\n\n// Milliseconds per meter to kilometers per hour\nconst MPS_TO_KMH = 3600; // hour = 3600 * 1000 milliseconds / kilometer = 1000 meters\n\nclass CyclingWorkout extends BaseWorkout {\n    constructor() {\n        super();\n\n        this.type = WORKOUT_TYPE_CYCLING;\n\n        this._speed = 0;\n    }\n\n    /**\n     *\n     * @param {Point} pointA\n     * @param {Point} pointB\n     * @returns {number}\n     */\n    _calculateSpeed(pointA, pointB) {\n        let distance = this._calculateDistance(pointA, pointB),\n            timeDiff = pointB.time - pointA.time;\n\n        if( distance > 1 && timeDiff > 0){\n            this._speed = timeDiff ? MPS_TO_KMH * distance / timeDiff : 0;\n        }\n\n        return this._speed;\n    }\n\n    /**\n     * Calculate the params such as distance, speed, etc\n     *\n     * @param {Point} pointA\n     * @param {Point} pointB\n     */\n    calculate(pointA, pointB){\n        this._calculateSpeed(pointA, pointB);\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    get speed(){\n        return this._speed;\n    }\n}\n\nexport {CyclingWorkout}",";(function(root){\n    /**\n     *\n     * @param {int} segmentIndex\n     * @param {number} lat\n     * @param {number} lng\n     * @param {int} heartRate\n     * @param {number} elevation\n     * @param {int} time\n     * @constructor\n     */\n    var Point = function(segmentIndex, lat, lng, heartRate, elevation, time){\n        this.segment_index = segmentIndex;\n        this.lat = lat;\n        this.lng = lng;\n        this.heart_rate = heartRate;\n        this.elevation = elevation;\n        this.time = time;\n    };\n\n    Point.prototype = {\n        init: function(){\n\n        }\n    };\n\n    root.Point = Point;\n})(window);\n","import {BaseWorkout, WORKOUT_TYPE_RUNNING} from \"./app.workout.base_workout\";\n\n// Milliseconds per meter to minutes per kilometer\nconst MSEC_PER_METER_TO_MIN_PER_KM = 60;// Minute = 60 * 1000  millisecond / kilometer = 1000 meters\n\n\nclass RunningWorkout extends BaseWorkout {\n    constructor() {\n        super();\n\n        this.type = WORKOUT_TYPE_RUNNING;\n\n        this._pace = 0;\n    }\n\n    /**\n     *\n     * @param {Point} pointA\n     * @param {Point} pointB\n     * @returns {number}\n     */\n    _calculatePace(pointA, pointB) {\n        let distance = this._calculateDistance(pointA, pointB),\n            timeDiff = pointB.time - pointA.time;\n\n        if (distance > 1 && timeDiff > 0) {\n            this._pace = (timeDiff / distance) / MSEC_PER_METER_TO_MIN_PER_KM;\n        }\n\n        return this._pace;\n    }\n\n    /**\n     * Calculate the params such as distance, speed, etc\n     *\n     * @param {Point} pointA\n     * @param {Point} pointB\n     */\n    calculate(pointA, pointB) {\n        this._calculatePace(pointA, pointB);\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get speedUnit() {\n        return 'min/km';\n    }\n\n    /**\n     *\n     * @returns {string}\n     */\n    get speedLabel() {\n        return 'Pace'\n    }\n\n    /**\n     *\n     * @returns {number}\n     */\n    get speed() {\n        return this._pace;\n    }\n}\n\nexport {RunningWorkout};","###\n(c) 2011 Jan Monschke\nv1.0.2\nGeoMock is licensed under the MIT license.\n###\n\ndo ->\n  unless navigator? \n    window.navigator = {}\n\n  unless navigator.geolocation? \n    window.navigator.geolocation = {}\n  \n  navigator.geolocation.delay = 1000\n    \n  navigator.geolocation.shouldFail = false\n  navigator.geolocation.repeat = true\n  navigator.geolocation.failsAt = -1\n  navigator.geolocation.errorMessage = \"There was an error retrieving the position!\"\n    \n  navigator.geolocation.currentTimeout = -1\n    \n  navigator.geolocation.lastPosReturned = 0\n\n  navigator.geolocation._sanitizeLastReturned = ->\n    if @lastPosReturned > @waypoints.length-1\n      @lastPosReturned = 0\n      if @repeat == false\n        clearInterval @currentTimeout\n    \n  navigator.geolocation._geoCall = (method, success, error) ->\n    if @shouldFail and error?\n      @currentTimeout = window[method].call null, =>\n        error @errorMessage\n      , @delay\n    else\n      if success?\n        @currentTimeout = window[method].call null, =>\n          success @waypoints[@lastPosReturned++]\n          do @_sanitizeLastReturned\n        , @delay\n    \n  navigator.geolocation.getCurrentPosition = (success, error) ->\n    @_geoCall \"setTimeout\", success, error\n  \n  navigator.geolocation.watchPosition = (success, error) ->\n    @_geoCall \"setInterval\", success, error\n    @currentTimeout\n  \n  navigator.geolocation.clearWatch = (id) ->\n    clearInterval id\n  \n  navigator.geolocation.waypoints = [\n    {coords : {latitude : 52.5168, longitude : 13.3889, accuracy: 1500 }},\n    {coords : {latitude : 52.5162, longitude : 13.3890, accuracy: 1334 }},\n    {coords : {latitude : 52.5154, longitude : 13.3890, accuracy: 631  }},\n    {coords : {latitude : 52.5150, longitude : 13.3890, accuracy: 361  }},\n    {coords : {latitude : 52.5144, longitude : 13.3890, accuracy: 150  }},\n    {coords : {latitude : 52.5138, longitude : 13.3890, accuracy: 65   }},\n    {coords : {latitude : 52.5138, longitude : 13.3895, accuracy: 65   }},\n    {coords : {latitude : 52.5139, longitude : 13.3899, accuracy: 65   }},\n    {coords : {latitude : 52.5140, longitude : 13.3906, accuracy: 65   }},\n    {coords : {latitude : 52.5140, longitude : 13.3910, accuracy: 65   }}\n  ]\n"],"sourceRoot":""}